import{s as Ni,x as Gi,n as zt,r as Pi}from"../chunks/scheduler.u2sAWruA.js";import{S as Fi,i as Oi,e as oe,s as Qe,b as Bt,c as ae,d as et,h as tt,f as jt,g as Se,y as Mi,o as $,j as Ii,k as W,z as Ht,l as ki}from"../chunks/index.BzgoUWG4.js";var b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lt(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ft={exports:{}},ue=typeof Reflect=="object"?Reflect:null,Wt=ue&&typeof ue.apply=="function"?ue.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)},Pe;ue&&typeof ue.ownKeys=="function"?Pe=ue.ownKeys:Object.getOwnPropertySymbols?Pe=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Pe=function(t){return Object.getOwnPropertyNames(t)};function $i(i){console&&console.warn&&console.warn(i)}var yr=Number.isNaN||function(t){return t!==t};function D(){D.init.call(this)}ft.exports=D;ft.exports.once=ji;D.EventEmitter=D;D.prototype._events=void 0;D.prototype._eventsCount=0;D.prototype._maxListeners=void 0;var Vt=10;function $e(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(D,"defaultMaxListeners",{enumerable:!0,get:function(){return Vt},set:function(i){if(typeof i!="number"||i<0||yr(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");Vt=i}});D.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};D.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||yr(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function vr(i){return i._maxListeners===void 0?D.defaultMaxListeners:i._maxListeners}D.prototype.getMaxListeners=function(){return vr(this)};D.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n=t==="error",o=this._events;if(o!==void 0)n=n&&o.error===void 0;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=o[t];if(u===void 0)return!1;if(typeof u=="function")Wt(u,this,e);else for(var d=u.length,c=Er(u,d),r=0;r<d;++r)Wt(c[r],this,e);return!0};function mr(i,t,e,r){var n,o,a;if($e(e),o=i._events,o===void 0?(o=i._events=Object.create(null),i._eventsCount=0):(o.newListener!==void 0&&(i.emit("newListener",t,e.listener?e.listener:e),o=i._events),a=o[t]),a===void 0)a=o[t]=e,++i._eventsCount;else if(typeof a=="function"?a=o[t]=r?[e,a]:[a,e]:r?a.unshift(e):a.push(e),n=vr(i),n>0&&a.length>n&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=i,s.type=t,s.count=a.length,$i(s)}return i}D.prototype.addListener=function(t,e){return mr(this,t,e,!1)};D.prototype.on=D.prototype.addListener;D.prototype.prependListener=function(t,e){return mr(this,t,e,!0)};function Ui(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function wr(i,t,e){var r={fired:!1,wrapFn:void 0,target:i,type:t,listener:e},n=Ui.bind(r);return n.listener=e,r.wrapFn=n,n}D.prototype.once=function(t,e){return $e(e),this.on(t,wr(this,t,e)),this};D.prototype.prependOnceListener=function(t,e){return $e(e),this.prependListener(t,wr(this,t,e)),this};D.prototype.removeListener=function(t,e){var r,n,o,a,s;if($e(e),n=this._events,n===void 0)return this;if(r=n[t],r===void 0)return this;if(r===e||r.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if(typeof r!="function"){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===e||r[a].listener===e){s=r[a].listener,o=a;break}if(o<0)return this;o===0?r.shift():zi(r,o),r.length===1&&(n[t]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",t,s||e)}return this};D.prototype.off=D.prototype.removeListener;D.prototype.removeAllListeners=function(t){var e,r,n;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var o=Object.keys(r),a;for(n=0;n<o.length;++n)a=o[n],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this};function _r(i,t,e){var r=i._events;if(r===void 0)return[];var n=r[t];return n===void 0?[]:typeof n=="function"?e?[n.listener||n]:[n]:e?Bi(n):Er(n,n.length)}D.prototype.listeners=function(t){return _r(this,t,!0)};D.prototype.rawListeners=function(t){return _r(this,t,!1)};D.listenerCount=function(i,t){return typeof i.listenerCount=="function"?i.listenerCount(t):br.call(i,t)};D.prototype.listenerCount=br;function br(i){var t=this._events;if(t!==void 0){var e=t[i];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}D.prototype.eventNames=function(){return this._eventsCount>0?Pe(this._events):[]};function Er(i,t){for(var e=new Array(t),r=0;r<t;++r)e[r]=i[r];return e}function zi(i,t){for(;t+1<i.length;t++)i[t]=i[t+1];i.pop()}function Bi(i){for(var t=new Array(i.length),e=0;e<t.length;++e)t[e]=i[e].listener||i[e];return t}function ji(i,t){return new Promise(function(e,r){function n(a){i.removeListener(t,o),r(a)}function o(){typeof i.removeListener=="function"&&i.removeListener("error",n),e([].slice.call(arguments))}xr(i,t,o,{once:!0}),t!=="error"&&Hi(i,n,{once:!0})})}function Hi(i,t,e){typeof i.on=="function"&&xr(i,"error",t,e)}function xr(i,t,e,r){if(typeof i.on=="function")r.once?i.once(t,e):i.on(t,e);else if(typeof i.addEventListener=="function")i.addEventListener(t,function n(o){r.once&&i.removeEventListener(t,n),e(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var Ar=ft.exports;function q(i){if(typeof i!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=i}typeof Symbol<"u"&&(q.prototype[Symbol.iterator]=function(){return this});q.of=function(){var i=arguments,t=i.length,e=0;return new q(function(){return e>=t?{done:!0}:{done:!1,value:i[e++]}})};q.empty=function(){var i=new q(function(){return{done:!0}});return i};q.fromSequence=function(i){var t=0,e=i.length;return new q(function(){return t>=e?{done:!0}:{done:!1,value:i[t++]}})};q.is=function(i){return i instanceof q?!0:typeof i=="object"&&i!==null&&typeof i.next=="function"};var pt=q;const B=lt(pt);var Ue={};Ue.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Ue.SYMBOL_SUPPORT=typeof Symbol<"u";var Wi=pt,Tr=Ue,Vi=Tr.ARRAY_BUFFER_SUPPORT,Yi=Tr.SYMBOL_SUPPORT;function Ki(i){return typeof i=="string"||Array.isArray(i)||Vi&&ArrayBuffer.isView(i)?Wi.fromSequence(i):typeof i!="object"||i===null?null:Yi&&typeof i[Symbol.iterator]=="function"?i[Symbol.iterator]():typeof i.next=="function"?i:null}var Sr=function(t){var e=Ki(t);if(!e)throw new Error("obliterator: target is not iterable nor a valid iterator.");return e},qi=Sr,Xi=function(t,e){for(var r=arguments.length>1?e:1/0,n=r!==1/0?new Array(r):[],o,a=0,s=qi(t);;){if(a===r)return n;if(o=s.next(),o.done)return a!==e&&(n.length=a),n;n[a++]=o.value}};const Cr=lt(Xi);var Zi=pt,Ji=Sr,Qi=function(){var t=arguments,e=null,r=-1;return new Zi(function(){var o=null;do{if(e===null){if(r++,r>=t.length)return{done:!0};e=Ji(t[r])}if(o=e.next(),o.done===!0){e=null;continue}break}while(!0);return o})};const X=lt(Qi);function en(){const i=arguments[0];for(let t=1,e=arguments.length;t<e;t++)if(arguments[t])for(const r in arguments[t])i[r]=arguments[t][r];return i}let P=en;typeof Object.assign=="function"&&(P=Object.assign);function z(i,t,e,r){const n=i._nodes.get(t);let o=null;return n&&(r==="mixed"?o=n.out&&n.out[e]||n.undirected&&n.undirected[e]:r==="directed"?o=n.out&&n.out[e]:o=n.undirected&&n.undirected[e]),o}function F(i){return typeof i=="object"&&i!==null}function Lr(i){let t;for(t in i)return!1;return!0}function U(i,t,e){Object.defineProperty(i,t,{enumerable:!1,configurable:!1,writable:!0,value:e})}function H(i,t,e){const r={enumerable:!0,configurable:!0};typeof e=="function"?r.get=e:(r.value=e,r.writable=!1),Object.defineProperty(i,t,r)}function Yt(i){return!(!F(i)||i.attributes&&!Array.isArray(i.attributes))}function tn(){let i=Math.floor(Math.random()*256)&255;return()=>i++}class gt extends Error{constructor(t){super(),this.name="GraphError",this.message=t}}class E extends gt{constructor(t){super(t),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,E.prototype.constructor)}}class m extends gt{constructor(t){super(t),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,m.prototype.constructor)}}class T extends gt{constructor(t){super(t),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,T.prototype.constructor)}}function Dr(i,t){this.key=i,this.attributes=t,this.clear()}Dr.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Rr(i,t){this.key=i,this.attributes=t,this.clear()}Rr.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function Nr(i,t){this.key=i,this.attributes=t,this.clear()}Nr.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function fe(i,t,e,r,n){this.key=t,this.attributes=n,this.undirected=i,this.source=e,this.target=r}fe.prototype.attach=function(){let i="out",t="in";this.undirected&&(i=t="undirected");const e=this.source.key,r=this.target.key;this.source[i][r]=this,!(this.undirected&&e===r)&&(this.target[t][e]=this)};fe.prototype.attachMulti=function(){let i="out",t="in";const e=this.source.key,r=this.target.key;this.undirected&&(i=t="undirected");const n=this.source[i],o=n[r];if(typeof o>"u"){n[r]=this,this.undirected&&e===r||(this.target[t][e]=this);return}o.previous=this,this.next=o,n[r]=this,this.target[t][e]=this};fe.prototype.detach=function(){const i=this.source.key,t=this.target.key;let e="out",r="in";this.undirected&&(e=r="undirected"),delete this.source[e][t],delete this.target[r][i]};fe.prototype.detachMulti=function(){const i=this.source.key,t=this.target.key;let e="out",r="in";this.undirected&&(e=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[e][t],delete this.target[r][i]):(this.next.previous=void 0,this.source[e][t]=this.next,this.target[r][i]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const Gr=0,Pr=1,rn=2,Fr=3;function Z(i,t,e,r,n,o,a){let s,u,d,c;if(r=""+r,e===Gr){if(s=i._nodes.get(r),!s)throw new m(`Graph.${t}: could not find the "${r}" node in the graph.`);d=n,c=o}else if(e===Fr){if(n=""+n,u=i._edges.get(n),!u)throw new m(`Graph.${t}: could not find the "${n}" edge in the graph.`);const h=u.source.key,l=u.target.key;if(r===h)s=u.target;else if(r===l)s=u.source;else throw new m(`Graph.${t}: the "${r}" node is not attached to the "${n}" edge (${h}, ${l}).`);d=o,c=a}else{if(u=i._edges.get(r),!u)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`);e===Pr?s=u.source:s=u.target,d=n,c=o}return[s,d,c]}function nn(i,t,e){i.prototype[t]=function(r,n,o){const[a,s]=Z(this,t,e,r,n,o);return a.attributes[s]}}function on(i,t,e){i.prototype[t]=function(r,n){const[o]=Z(this,t,e,r,n);return o.attributes}}function an(i,t,e){i.prototype[t]=function(r,n,o){const[a,s]=Z(this,t,e,r,n,o);return a.attributes.hasOwnProperty(s)}}function sn(i,t,e){i.prototype[t]=function(r,n,o,a){const[s,u,d]=Z(this,t,e,r,n,o,a);return s.attributes[u]=d,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:u}),this}}function un(i,t,e){i.prototype[t]=function(r,n,o,a){const[s,u,d]=Z(this,t,e,r,n,o,a);if(typeof d!="function")throw new E(`Graph.${t}: updater should be a function.`);const c=s.attributes,h=d(c[u]);return c[u]=h,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:u}),this}}function dn(i,t,e){i.prototype[t]=function(r,n,o){const[a,s]=Z(this,t,e,r,n,o);return delete a.attributes[s],this.emit("nodeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:s}),this}}function hn(i,t,e){i.prototype[t]=function(r,n,o){const[a,s]=Z(this,t,e,r,n,o);if(!F(s))throw new E(`Graph.${t}: provided attributes are not a plain object.`);return a.attributes=s,this.emit("nodeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}function cn(i,t,e){i.prototype[t]=function(r,n,o){const[a,s]=Z(this,t,e,r,n,o);if(!F(s))throw new E(`Graph.${t}: provided attributes are not a plain object.`);return P(a.attributes,s),this.emit("nodeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:s}),this}}function ln(i,t,e){i.prototype[t]=function(r,n,o){const[a,s]=Z(this,t,e,r,n,o);if(typeof s!="function")throw new E(`Graph.${t}: provided updater is not a function.`);return a.attributes=s(a.attributes),this.emit("nodeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}const fn=[{name:i=>`get${i}Attribute`,attacher:nn},{name:i=>`get${i}Attributes`,attacher:on},{name:i=>`has${i}Attribute`,attacher:an},{name:i=>`set${i}Attribute`,attacher:sn},{name:i=>`update${i}Attribute`,attacher:un},{name:i=>`remove${i}Attribute`,attacher:dn},{name:i=>`replace${i}Attributes`,attacher:hn},{name:i=>`merge${i}Attributes`,attacher:cn},{name:i=>`update${i}Attributes`,attacher:ln}];function pn(i){fn.forEach(function({name:t,attacher:e}){e(i,t("Node"),Gr),e(i,t("Source"),Pr),e(i,t("Target"),rn),e(i,t("Opposite"),Fr)})}function gn(i,t,e){i.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new T(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new T(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+n;if(n=arguments[2],o=z(this,a,s,e),!o)throw new m(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(e!=="mixed")throw new T(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return o.attributes[n]}}function yn(i,t,e){i.prototype[t]=function(r){let n;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new T(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new T(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+arguments[1];if(n=z(this,o,a,e),!n)throw new m(`Graph.${t}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(e!=="mixed")throw new T(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,n=this._edges.get(r),!n)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return n.attributes}}function vn(i,t,e){i.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new T(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new T(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+n;if(n=arguments[2],o=z(this,a,s,e),!o)throw new m(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(e!=="mixed")throw new T(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return o.attributes.hasOwnProperty(n)}}function mn(i,t,e){i.prototype[t]=function(r,n,o){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new T(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new T(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+n;if(n=arguments[2],o=arguments[3],a=z(this,s,u,e),!a)throw new m(`Graph.${t}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(e!=="mixed")throw new T(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return a.attributes[n]=o,this.emit("edgeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:n}),this}}function wn(i,t,e){i.prototype[t]=function(r,n,o){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new T(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new T(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+n;if(n=arguments[2],o=arguments[3],a=z(this,s,u,e),!a)throw new m(`Graph.${t}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(e!=="mixed")throw new T(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(typeof o!="function")throw new E(`Graph.${t}: updater should be a function.`);return a.attributes[n]=o(a.attributes[n]),this.emit("edgeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:n}),this}}function _n(i,t,e){i.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new T(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new T(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+n;if(n=arguments[2],o=z(this,a,s,e),!o)throw new m(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(e!=="mixed")throw new T(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return delete o.attributes[n],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:n}),this}}function bn(i,t,e){i.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new T(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new T(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+n;if(n=arguments[2],o=z(this,a,s,e),!o)throw new m(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(e!=="mixed")throw new T(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(!F(n))throw new E(`Graph.${t}: provided attributes are not a plain object.`);return o.attributes=n,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function En(i,t,e){i.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new T(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new T(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+n;if(n=arguments[2],o=z(this,a,s,e),!o)throw new m(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(e!=="mixed")throw new T(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(!F(n))throw new E(`Graph.${t}: provided attributes are not a plain object.`);return P(o.attributes,n),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:n}),this}}function xn(i,t,e){i.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new T(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new T(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+n;if(n=arguments[2],o=z(this,a,s,e),!o)throw new m(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(e!=="mixed")throw new T(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(typeof n!="function")throw new E(`Graph.${t}: provided updater is not a function.`);return o.attributes=n(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const An=[{name:i=>`get${i}Attribute`,attacher:gn},{name:i=>`get${i}Attributes`,attacher:yn},{name:i=>`has${i}Attribute`,attacher:vn},{name:i=>`set${i}Attribute`,attacher:mn},{name:i=>`update${i}Attribute`,attacher:wn},{name:i=>`remove${i}Attribute`,attacher:_n},{name:i=>`replace${i}Attributes`,attacher:bn},{name:i=>`merge${i}Attributes`,attacher:En},{name:i=>`update${i}Attributes`,attacher:xn}];function Tn(i){An.forEach(function({name:t,attacher:e}){e(i,t("Edge"),"mixed"),e(i,t("DirectedEdge"),"directed"),e(i,t("UndirectedEdge"),"undirected")})}const Sn=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Cn(i,t,e,r){let n=!1;for(const o in t){if(o===r)continue;const a=t[o];if(n=e(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),i&&n)return a.key}}function Ln(i,t,e,r){let n,o,a,s=!1;for(const u in t)if(u!==r){n=t[u];do{if(o=n.source,a=n.target,s=e(n.key,n.attributes,o.key,a.key,o.attributes,a.attributes,n.undirected),i&&s)return n.key;n=n.next}while(n!==void 0)}}function rt(i,t){const e=Object.keys(i),r=e.length;let n,o=0;return new B(function(){do if(n)n=n.next;else{if(o>=r)return{done:!0};const s=e[o++];if(s===t){n=void 0;continue}n=i[s]}while(!n);return{done:!1,value:{edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected}}})}function Dn(i,t,e,r){const n=t[e];if(!n)return;const o=n.source,a=n.target;if(r(n.key,n.attributes,o.key,a.key,o.attributes,a.attributes,n.undirected)&&i)return n.key}function Rn(i,t,e,r){let n=t[e];if(!n)return;let o=!1;do{if(o=r(n.key,n.attributes,n.source.key,n.target.key,n.source.attributes,n.target.attributes,n.undirected),i&&o)return n.key;n=n.next}while(n!==void 0)}function it(i,t){let e=i[t];return e.next!==void 0?new B(function(){if(!e)return{done:!0};const r={edge:e.key,attributes:e.attributes,source:e.source.key,target:e.target.key,sourceAttributes:e.source.attributes,targetAttributes:e.target.attributes,undirected:e.undirected};return e=e.next,{done:!1,value:r}}):B.of({edge:e.key,attributes:e.attributes,source:e.source.key,target:e.target.key,sourceAttributes:e.source.attributes,targetAttributes:e.target.attributes,undirected:e.undirected})}function Nn(i,t){if(i.size===0)return[];if(t==="mixed"||t===i.type)return typeof Array.from=="function"?Array.from(i._edges.keys()):Cr(i._edges.keys(),i._edges.size);const e=t==="undirected"?i.undirectedSize:i.directedSize,r=new Array(e),n=t==="undirected",o=i._edges.values();let a=0,s,u;for(;s=o.next(),s.done!==!0;)u=s.value,u.undirected===n&&(r[a++]=u.key);return r}function Or(i,t,e,r){if(t.size===0)return;const n=e!=="mixed"&&e!==t.type,o=e==="undirected";let a,s,u=!1;const d=t._edges.values();for(;a=d.next(),a.done!==!0;){if(s=a.value,n&&s.undirected!==o)continue;const{key:c,attributes:h,source:l,target:f}=s;if(u=r(c,h,l.key,f.key,l.attributes,f.attributes,s.undirected),i&&u)return c}}function Gn(i,t){if(i.size===0)return B.empty();const e=t!=="mixed"&&t!==i.type,r=t==="undirected",n=i._edges.values();return new B(function(){let a,s;for(;;){if(a=n.next(),a.done)return a;if(s=a.value,!(e&&s.undirected!==r))break}return{value:{edge:s.key,attributes:s.attributes,source:s.source.key,target:s.target.key,sourceAttributes:s.source.attributes,targetAttributes:s.target.attributes,undirected:s.undirected},done:!1}})}function yt(i,t,e,r,n,o){const a=t?Ln:Cn;let s;if(e!=="undirected"&&(r!=="out"&&(s=a(i,n.in,o),i&&s)||r!=="in"&&(s=a(i,n.out,o,r?void 0:n.key),i&&s))||e!=="directed"&&(s=a(i,n.undirected,o),i&&s))return s}function Pn(i,t,e,r){const n=[];return yt(!1,i,t,e,r,function(o){n.push(o)}),n}function Fn(i,t,e){let r=B.empty();return i!=="undirected"&&(t!=="out"&&typeof e.in<"u"&&(r=X(r,rt(e.in))),t!=="in"&&typeof e.out<"u"&&(r=X(r,rt(e.out,t?void 0:e.key)))),i!=="directed"&&typeof e.undirected<"u"&&(r=X(r,rt(e.undirected))),r}function vt(i,t,e,r,n,o,a){const s=e?Rn:Dn;let u;if(t!=="undirected"&&(typeof n.in<"u"&&r!=="out"&&(u=s(i,n.in,o,a),i&&u)||typeof n.out<"u"&&r!=="in"&&(r||n.key!==o)&&(u=s(i,n.out,o,a),i&&u))||t!=="directed"&&typeof n.undirected<"u"&&(u=s(i,n.undirected,o,a),i&&u))return u}function On(i,t,e,r,n){const o=[];return vt(!1,i,t,e,r,n,function(a){o.push(a)}),o}function Mn(i,t,e,r){let n=B.empty();return i!=="undirected"&&(typeof e.in<"u"&&t!=="out"&&r in e.in&&(n=X(n,it(e.in,r))),typeof e.out<"u"&&t!=="in"&&r in e.out&&(t||e.key!==r)&&(n=X(n,it(e.out,r)))),i!=="directed"&&typeof e.undirected<"u"&&r in e.undirected&&(n=X(n,it(e.undirected,r))),n}function In(i,t){const{name:e,type:r,direction:n}=t;i.prototype[e]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return Nn(this,r);if(arguments.length===1){o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new m(`Graph.${e}: could not find the "${o}" node in the graph.`);return Pn(this.multi,r==="mixed"?this.type:r,n,s)}if(arguments.length===2){o=""+o,a=""+a;const s=this._nodes.get(o);if(!s)throw new m(`Graph.${e}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new m(`Graph.${e}:  could not find the "${a}" target node in the graph.`);return On(r,this.multi,n,s,a)}throw new E(`Graph.${e}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function kn(i,t){const{name:e,type:r,direction:n}=t,o="forEach"+e[0].toUpperCase()+e.slice(1,-1);i.prototype[o]=function(d,c,h){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return h=d,Or(!1,this,r,h);if(arguments.length===2){d=""+d,h=c;const l=this._nodes.get(d);if(typeof l>"u")throw new m(`Graph.${o}: could not find the "${d}" node in the graph.`);return yt(!1,this.multi,r==="mixed"?this.type:r,n,l,h)}if(arguments.length===3){d=""+d,c=""+c;const l=this._nodes.get(d);if(!l)throw new m(`Graph.${o}:  could not find the "${d}" source node in the graph.`);if(!this._nodes.has(c))throw new m(`Graph.${o}:  could not find the "${c}" target node in the graph.`);return vt(!1,r,this.multi,n,l,c,h)}throw new E(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const a="map"+e[0].toUpperCase()+e.slice(1);i.prototype[a]=function(){const d=Array.prototype.slice.call(arguments),c=d.pop();let h;if(d.length===0){let l=0;r!=="directed"&&(l+=this.undirectedSize),r!=="undirected"&&(l+=this.directedSize),h=new Array(l);let f=0;d.push((p,g,y,v,w,_,x)=>{h[f++]=c(p,g,y,v,w,_,x)})}else h=[],d.push((l,f,p,g,y,v,w)=>{h.push(c(l,f,p,g,y,v,w))});return this[o].apply(this,d),h};const s="filter"+e[0].toUpperCase()+e.slice(1);i.prototype[s]=function(){const d=Array.prototype.slice.call(arguments),c=d.pop(),h=[];return d.push((l,f,p,g,y,v,w)=>{c(l,f,p,g,y,v,w)&&h.push(l)}),this[o].apply(this,d),h};const u="reduce"+e[0].toUpperCase()+e.slice(1);i.prototype[u]=function(){let d=Array.prototype.slice.call(arguments);if(d.length<2||d.length>4)throw new E(`Graph.${u}: invalid number of arguments (expecting 2, 3 or 4 and got ${d.length}).`);if(typeof d[d.length-1]=="function"&&typeof d[d.length-2]!="function")throw new E(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,h;d.length===2?(c=d[0],h=d[1],d=[]):d.length===3?(c=d[1],h=d[2],d=[d[0]]):d.length===4&&(c=d[2],h=d[3],d=[d[0],d[1]]);let l=h;return d.push((f,p,g,y,v,w,_)=>{l=c(l,f,p,g,y,v,w,_)}),this[o].apply(this,d),l}}function $n(i,t){const{name:e,type:r,direction:n}=t,o="find"+e[0].toUpperCase()+e.slice(1,-1);i.prototype[o]=function(u,d,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return c=u,Or(!0,this,r,c);if(arguments.length===2){u=""+u,c=d;const h=this._nodes.get(u);if(typeof h>"u")throw new m(`Graph.${o}: could not find the "${u}" node in the graph.`);return yt(!0,this.multi,r==="mixed"?this.type:r,n,h,c)}if(arguments.length===3){u=""+u,d=""+d;const h=this._nodes.get(u);if(!h)throw new m(`Graph.${o}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(d))throw new m(`Graph.${o}:  could not find the "${d}" target node in the graph.`);return vt(!0,r,this.multi,n,h,d,c)}throw new E(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const a="some"+e[0].toUpperCase()+e.slice(1,-1);i.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),d=u.pop();return u.push((h,l,f,p,g,y,v)=>d(h,l,f,p,g,y,v)),!!this[o].apply(this,u)};const s="every"+e[0].toUpperCase()+e.slice(1,-1);i.prototype[s]=function(){const u=Array.prototype.slice.call(arguments),d=u.pop();return u.push((h,l,f,p,g,y,v)=>!d(h,l,f,p,g,y,v)),!this[o].apply(this,u)}}function Un(i,t){const{name:e,type:r,direction:n}=t,o=e.slice(0,-1)+"Entries";i.prototype[o]=function(a,s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return B.empty();if(!arguments.length)return Gn(this,r);if(arguments.length===1){a=""+a;const u=this._nodes.get(a);if(!u)throw new m(`Graph.${o}: could not find the "${a}" node in the graph.`);return Fn(r,n,u)}if(arguments.length===2){a=""+a,s=""+s;const u=this._nodes.get(a);if(!u)throw new m(`Graph.${o}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(s))throw new m(`Graph.${o}:  could not find the "${s}" target node in the graph.`);return Mn(r,n,u,s)}throw new E(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function zn(i){Sn.forEach(t=>{In(i,t),kn(i,t),$n(i,t),Un(i,t)})}const Bn=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function ze(){this.A=null,this.B=null}ze.prototype.wrap=function(i){this.A===null?this.A=i:this.B===null&&(this.B=i)};ze.prototype.has=function(i){return this.A!==null&&i in this.A||this.B!==null&&i in this.B};function ve(i,t,e,r,n){for(const o in r){const a=r[o],s=a.source,u=a.target,d=s===e?u:s;if(t&&t.has(d.key))continue;const c=n(d.key,d.attributes);if(i&&c)return d.key}}function mt(i,t,e,r,n){if(t!=="mixed"){if(t==="undirected")return ve(i,null,r,r.undirected,n);if(typeof e=="string")return ve(i,null,r,r[e],n)}const o=new ze;let a;if(t!=="undirected"){if(e!=="out"){if(a=ve(i,null,r,r.in,n),i&&a)return a;o.wrap(r.in)}if(e!=="in"){if(a=ve(i,o,r,r.out,n),i&&a)return a;o.wrap(r.out)}}if(t!=="directed"&&(a=ve(i,o,r,r.undirected,n),i&&a))return a}function jn(i,t,e){if(i!=="mixed"){if(i==="undirected")return Object.keys(e.undirected);if(typeof t=="string")return Object.keys(e[t])}const r=[];return mt(!1,i,t,e,function(n){r.push(n)}),r}function me(i,t,e){const r=Object.keys(e),n=r.length;let o=0;return new B(function(){let s=null;do{if(o>=n)return i&&i.wrap(e),{done:!0};const u=e[r[o++]],d=u.source,c=u.target;if(s=d===t?c:d,i&&i.has(s.key)){s=null;continue}}while(s===null);return{done:!1,value:{neighbor:s.key,attributes:s.attributes}}})}function Hn(i,t,e){if(i!=="mixed"){if(i==="undirected")return me(null,e,e.undirected);if(typeof t=="string")return me(null,e,e[t])}let r=B.empty();const n=new ze;return i!=="undirected"&&(t!=="out"&&(r=X(r,me(n,e,e.in))),t!=="in"&&(r=X(r,me(n,e,e.out)))),i!=="directed"&&(r=X(r,me(n,e,e.undirected))),r}function Wn(i,t){const{name:e,type:r,direction:n}=t;i.prototype[e]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new m(`Graph.${e}: could not find the "${o}" node in the graph.`);return jn(r==="mixed"?this.type:r,n,a)}}function Vn(i,t){const{name:e,type:r,direction:n}=t,o="forEach"+e[0].toUpperCase()+e.slice(1,-1);i.prototype[o]=function(d,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;d=""+d;const h=this._nodes.get(d);if(typeof h>"u")throw new m(`Graph.${o}: could not find the "${d}" node in the graph.`);mt(!1,r==="mixed"?this.type:r,n,h,c)};const a="map"+e[0].toUpperCase()+e.slice(1);i.prototype[a]=function(d,c){const h=[];return this[o](d,(l,f)=>{h.push(c(l,f))}),h};const s="filter"+e[0].toUpperCase()+e.slice(1);i.prototype[s]=function(d,c){const h=[];return this[o](d,(l,f)=>{c(l,f)&&h.push(l)}),h};const u="reduce"+e[0].toUpperCase()+e.slice(1);i.prototype[u]=function(d,c,h){if(arguments.length<3)throw new E(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let l=h;return this[o](d,(f,p)=>{l=c(l,f,p)}),l}}function Yn(i,t){const{name:e,type:r,direction:n}=t,o=e[0].toUpperCase()+e.slice(1,-1),a="find"+o;i.prototype[a]=function(d,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;d=""+d;const h=this._nodes.get(d);if(typeof h>"u")throw new m(`Graph.${a}: could not find the "${d}" node in the graph.`);return mt(!0,r==="mixed"?this.type:r,n,h,c)};const s="some"+o;i.prototype[s]=function(d,c){return!!this[a](d,c)};const u="every"+o;i.prototype[u]=function(d,c){return!this[a](d,(l,f)=>!c(l,f))}}function Kn(i,t){const{name:e,type:r,direction:n}=t,o=e.slice(0,-1)+"Entries";i.prototype[o]=function(a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return B.empty();a=""+a;const s=this._nodes.get(a);if(typeof s>"u")throw new m(`Graph.${o}: could not find the "${a}" node in the graph.`);return Hn(r==="mixed"?this.type:r,n,s)}}function qn(i){Bn.forEach(t=>{Wn(i,t),Vn(i,t),Yn(i,t),Kn(i,t)})}function Ce(i,t,e,r,n){const o=r._nodes.values(),a=r.type;let s,u,d,c,h,l,f;for(;s=o.next(),s.done!==!0;){let p=!1;if(u=s.value,a!=="undirected"){c=u.out;for(d in c){h=c[d];do{if(l=h.target,p=!0,f=n(u.key,l.key,u.attributes,l.attributes,h.key,h.attributes,h.undirected),i&&f)return h;h=h.next}while(h)}}if(a!=="directed"){c=u.undirected;for(d in c)if(!(t&&u.key>d)){h=c[d];do{if(l=h.target,l.key!==d&&(l=h.source),p=!0,f=n(u.key,l.key,u.attributes,l.attributes,h.key,h.attributes,h.undirected),i&&f)return h;h=h.next}while(h)}}if(e&&!p&&(f=n(u.key,null,u.attributes,null,null,null,null),i&&f))return null}}function Xn(i,t){const e={key:i};return Lr(t.attributes)||(e.attributes=P({},t.attributes)),e}function Zn(i,t,e){const r={key:t,source:e.source.key,target:e.target.key};return Lr(e.attributes)||(r.attributes=P({},e.attributes)),i==="mixed"&&e.undirected&&(r.undirected=!0),r}function Jn(i){if(!F(i))throw new E('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in i))throw new E("Graph.import: serialized node is missing its key.");if("attributes"in i&&(!F(i.attributes)||i.attributes===null))throw new E("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Qn(i){if(!F(i))throw new E('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in i))throw new E("Graph.import: serialized edge is missing its source.");if(!("target"in i))throw new E("Graph.import: serialized edge is missing its target.");if("attributes"in i&&(!F(i.attributes)||i.attributes===null))throw new E("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in i&&typeof i.undirected!="boolean")throw new E("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const eo=tn(),to=new Set(["directed","undirected","mixed"]),Kt=new Set(["domain","_events","_eventsCount","_maxListeners"]),ro=[{name:i=>`${i}Edge`,generateKey:!0},{name:i=>`${i}DirectedEdge`,generateKey:!0,type:"directed"},{name:i=>`${i}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:i=>`${i}EdgeWithKey`},{name:i=>`${i}DirectedEdgeWithKey`,type:"directed"},{name:i=>`${i}UndirectedEdgeWithKey`,type:"undirected"}],io={allowSelfLoops:!0,multi:!1,type:"mixed"};function no(i,t,e){if(e&&!F(e))throw new E(`Graph.addNode: invalid attributes. Expecting an object but got "${e}"`);if(t=""+t,e=e||{},i._nodes.has(t))throw new T(`Graph.addNode: the "${t}" node already exist in the graph.`);const r=new i.NodeDataClass(t,e);return i._nodes.set(t,r),i.emit("nodeAdded",{key:t,attributes:e}),r}function qt(i,t,e){const r=new i.NodeDataClass(t,e);return i._nodes.set(t,r),i.emit("nodeAdded",{key:t,attributes:e}),r}function Mr(i,t,e,r,n,o,a,s){if(!r&&i.type==="undirected")throw new T(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&i.type==="directed")throw new T(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(s&&!F(s))throw new E(`Graph.${t}: invalid attributes. Expecting an object but got "${s}"`);if(o=""+o,a=""+a,s=s||{},!i.allowSelfLoops&&o===a)throw new T(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const u=i._nodes.get(o),d=i._nodes.get(a);if(!u)throw new m(`Graph.${t}: source node "${o}" not found.`);if(!d)throw new m(`Graph.${t}: target node "${a}" not found.`);const c={key:null,undirected:r,source:o,target:a,attributes:s};if(e)n=i._edgeKeyGenerator();else if(n=""+n,i._edges.has(n))throw new T(`Graph.${t}: the "${n}" edge already exists in the graph.`);if(!i.multi&&(r?typeof u.undirected[a]<"u":typeof u.out[a]<"u"))throw new T(`Graph.${t}: an edge linking "${o}" to "${a}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const h=new fe(r,n,u,d,s);i._edges.set(n,h);const l=o===a;return r?(u.undirectedDegree++,d.undirectedDegree++,l&&(u.undirectedLoops++,i._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,l&&(u.directedLoops++,i._directedSelfLoopCount++)),i.multi?h.attachMulti():h.attach(),r?i._undirectedSize++:i._directedSize++,c.key=n,i.emit("edgeAdded",c),n}function oo(i,t,e,r,n,o,a,s,u){if(!r&&i.type==="undirected")throw new T(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&i.type==="directed")throw new T(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(s){if(u){if(typeof s!="function")throw new E(`Graph.${t}: invalid updater function. Expecting a function but got "${s}"`)}else if(!F(s))throw new E(`Graph.${t}: invalid attributes. Expecting an object but got "${s}"`)}o=""+o,a=""+a;let d;if(u&&(d=s,s=void 0),!i.allowSelfLoops&&o===a)throw new T(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=i._nodes.get(o),h=i._nodes.get(a),l,f;if(!e&&(l=i._edges.get(n),l)){if((l.source.key!==o||l.target.key!==a)&&(!r||l.source.key!==a||l.target.key!==o))throw new T(`Graph.${t}: inconsistency detected when attempting to merge the "${n}" edge with "${o}" source & "${a}" target vs. ("${l.source.key}", "${l.target.key}").`);f=l}if(!f&&!i.multi&&c&&(f=r?c.undirected[a]:c.out[a]),f){const w=[f.key,!1,!1,!1];if(u?!d:!s)return w;if(u){const _=f.attributes;f.attributes=d(_),i.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else P(f.attributes,s),i.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:s});return w}s=s||{},u&&d&&(s=d(s));const p={key:null,undirected:r,source:o,target:a,attributes:s};if(e)n=i._edgeKeyGenerator();else if(n=""+n,i._edges.has(n))throw new T(`Graph.${t}: the "${n}" edge already exists in the graph.`);let g=!1,y=!1;c||(c=qt(i,o,{}),g=!0,o===a&&(h=c,y=!0)),h||(h=qt(i,a,{}),y=!0),l=new fe(r,n,c,h,s),i._edges.set(n,l);const v=o===a;return r?(c.undirectedDegree++,h.undirectedDegree++,v&&(c.undirectedLoops++,i._undirectedSelfLoopCount++)):(c.outDegree++,h.inDegree++,v&&(c.directedLoops++,i._directedSelfLoopCount++)),i.multi?l.attachMulti():l.attach(),r?i._undirectedSize++:i._directedSize++,p.key=n,i.emit("edgeAdded",p),[n,!0,g,y]}function se(i,t){i._edges.delete(t.key);const{source:e,target:r,attributes:n}=t,o=t.undirected,a=e===r;o?(e.undirectedDegree--,r.undirectedDegree--,a&&(e.undirectedLoops--,i._undirectedSelfLoopCount--)):(e.outDegree--,r.inDegree--,a&&(e.directedLoops--,i._directedSelfLoopCount--)),i.multi?t.detachMulti():t.detach(),o?i._undirectedSize--:i._directedSize--,i.emit("edgeDropped",{key:t.key,attributes:n,source:e.key,target:r.key,undirected:o})}class C extends Ar.EventEmitter{constructor(t){if(super(),t=P({},io,t),typeof t.multi!="boolean")throw new E(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!to.has(t.type))throw new E(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if(typeof t.allowSelfLoops!="boolean")throw new E(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);const e=t.type==="mixed"?Dr:t.type==="directed"?Rr:Nr;U(this,"NodeDataClass",e);const r="geid_"+eo()+"_";let n=0;const o=()=>{let a;do a=r+n++;while(this._edges.has(a));return a};U(this,"_attributes",{}),U(this,"_nodes",new Map),U(this,"_edges",new Map),U(this,"_directedSize",0),U(this,"_undirectedSize",0),U(this,"_directedSelfLoopCount",0),U(this,"_undirectedSelfLoopCount",0),U(this,"_edgeKeyGenerator",o),U(this,"_options",t),Kt.forEach(a=>U(this,a,this[a])),H(this,"order",()=>this._nodes.size),H(this,"size",()=>this._edges.size),H(this,"directedSize",()=>this._directedSize),H(this,"undirectedSize",()=>this._undirectedSize),H(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),H(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),H(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),H(this,"multi",this._options.multi),H(this,"type",this._options.type),H(this,"allowSelfLoops",this._options.allowSelfLoops),H(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,e){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+t,n=this._edges.get(r);return!!n&&!n.undirected}else if(arguments.length===2){t=""+t,e=""+e;const r=this._nodes.get(t);return r?r.out.hasOwnProperty(e):!1}throw new E(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,e){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+t,n=this._edges.get(r);return!!n&&n.undirected}else if(arguments.length===2){t=""+t,e=""+e;const r=this._nodes.get(t);return r?r.undirected.hasOwnProperty(e):!1}throw new E(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,e){if(arguments.length===1){const r=""+t;return this._edges.has(r)}else if(arguments.length===2){t=""+t,e=""+e;const r=this._nodes.get(t);return r?typeof r.out<"u"&&r.out.hasOwnProperty(e)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(e):!1}throw new E(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,e){if(this.type==="undirected")return;if(t=""+t,e=""+e,this.multi)throw new T("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(t);if(!r)throw new m(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new m(`Graph.directedEdge: could not find the "${e}" target node in the graph.`);const n=r.out&&r.out[e]||void 0;if(n)return n.key}undirectedEdge(t,e){if(this.type==="directed")return;if(t=""+t,e=""+e,this.multi)throw new T("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(t);if(!r)throw new m(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new m(`Graph.undirectedEdge: could not find the "${e}" target node in the graph.`);const n=r.undirected&&r.undirected[e]||void 0;if(n)return n.key}edge(t,e){if(this.multi)throw new T("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new m(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new m(`Graph.edge: could not find the "${e}" target node in the graph.`);const n=r.out&&r.out[e]||r.undirected&&r.undirected[e]||void 0;if(n)return n.key}areDirectedNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new m(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in r.in||e in r.out}areOutNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new m(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in r.out}areInNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new m(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in r.in}areUndirectedNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new m(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="directed"?!1:e in r.undirected}areNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new m(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&(e in r.in||e in r.out)||this.type!=="directed"&&e in r.undirected}areInboundNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new m(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&e in r.in||this.type!=="directed"&&e in r.undirected}areOutboundNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new m(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&e in r.out||this.type!=="directed"&&e in r.undirected}inDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.inDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree}outDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.outDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.outDegree}directedDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.directedDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree+e.outDegree}undirectedDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:e.undirectedDegree}inboundDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.inboundDegree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=e.undirectedDegree),this.type!=="undirected"&&(r+=e.inDegree),r}outboundDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.outboundDegree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=e.undirectedDegree),this.type!=="undirected"&&(r+=e.outDegree),r}degree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.degree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=e.undirectedDegree),this.type!=="undirected"&&(r+=e.inDegree+e.outDegree),r}inDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree-e.directedLoops}outDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.outDegree-e.directedLoops}directedDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree+e.outDegree-e.directedLoops*2}undirectedDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:e.undirectedDegree-e.undirectedLoops*2}inboundDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,n=0;return this.type!=="directed"&&(r+=e.undirectedDegree,n+=e.undirectedLoops*2),this.type!=="undirected"&&(r+=e.inDegree,n+=e.directedLoops),r-n}outboundDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,n=0;return this.type!=="directed"&&(r+=e.undirectedDegree,n+=e.undirectedLoops*2),this.type!=="undirected"&&(r+=e.outDegree,n+=e.directedLoops),r-n}degreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,n=0;return this.type!=="directed"&&(r+=e.undirectedDegree,n+=e.undirectedLoops*2),this.type!=="undirected"&&(r+=e.inDegree+e.outDegree,n+=e.directedLoops*2),r-n}source(t){t=""+t;const e=this._edges.get(t);if(!e)throw new m(`Graph.source: could not find the "${t}" edge in the graph.`);return e.source.key}target(t){t=""+t;const e=this._edges.get(t);if(!e)throw new m(`Graph.target: could not find the "${t}" edge in the graph.`);return e.target.key}extremities(t){t=""+t;const e=this._edges.get(t);if(!e)throw new m(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[e.source.key,e.target.key]}opposite(t,e){t=""+t,e=""+e;const r=this._edges.get(e);if(!r)throw new m(`Graph.opposite: could not find the "${e}" edge in the graph.`);const n=r.source.key,o=r.target.key;if(t===n)return o;if(t===o)return n;throw new m(`Graph.opposite: the "${t}" node is not attached to the "${e}" edge (${n}, ${o}).`)}hasExtremity(t,e){t=""+t,e=""+e;const r=this._edges.get(t);if(!r)throw new m(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return r.source.key===e||r.target.key===e}isUndirected(t){t=""+t;const e=this._edges.get(t);if(!e)throw new m(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return e.undirected}isDirected(t){t=""+t;const e=this._edges.get(t);if(!e)throw new m(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!e.undirected}isSelfLoop(t){t=""+t;const e=this._edges.get(t);if(!e)throw new m(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return e.source===e.target}addNode(t,e){return no(this,t,e).key}mergeNode(t,e){if(e&&!F(e))throw new E(`Graph.mergeNode: invalid attributes. Expecting an object but got "${e}"`);t=""+t,e=e||{};let r=this._nodes.get(t);return r?(e&&(P(r.attributes,e),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:r.attributes,data:e})),[t,!1]):(r=new this.NodeDataClass(t,e),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:e}),[t,!0])}updateNode(t,e){if(e&&typeof e!="function")throw new E(`Graph.updateNode: invalid updater function. Expecting a function but got "${e}"`);t=""+t;let r=this._nodes.get(t);if(r){if(e){const o=r.attributes;r.attributes=e(o),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:r.attributes})}return[t,!1]}const n=e?e({}):{};return r=new this.NodeDataClass(t,n),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:n}),[t,!0]}dropNode(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.dropNode: could not find the "${t}" node in the graph.`);let r;if(this.type!=="undirected"){for(const n in e.out){r=e.out[n];do se(this,r),r=r.next;while(r)}for(const n in e.in){r=e.in[n];do se(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const n in e.undirected){r=e.undirected[n];do se(this,r),r=r.next;while(r)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:e.attributes})}dropEdge(t){let e;if(arguments.length>1){const r=""+arguments[0],n=""+arguments[1];if(e=z(this,r,n,this.type),!e)throw new m(`Graph.dropEdge: could not find the "${r}" -> "${n}" edge in the graph.`)}else if(t=""+t,e=this._edges.get(t),!e)throw new m(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);return se(this,e),this}dropDirectedEdge(t,e){if(arguments.length<2)throw new T("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new T("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");t=""+t,e=""+e;const r=z(this,t,e,"directed");if(!r)throw new m(`Graph.dropDirectedEdge: could not find a "${t}" -> "${e}" edge in the graph.`);return se(this,r),this}dropUndirectedEdge(t,e){if(arguments.length<2)throw new T("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new T("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=z(this,t,e,"undirected");if(!r)throw new m(`Graph.dropUndirectedEdge: could not find a "${t}" -> "${e}" edge in the graph.`);return se(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const t=this._nodes.values();let e;for(;e=t.next(),e.done!==!0;)e.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,e){return this._attributes[t]=e,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,e){if(typeof e!="function")throw new E("Graph.updateAttribute: updater should be a function.");const r=this._attributes[t];return this._attributes[t]=e(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!F(t))throw new E("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!F(t))throw new E("Graph.mergeAttributes: provided attributes are not a plain object.");return P(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if(typeof t!="function")throw new E("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,e){if(typeof t!="function")throw new E("Graph.updateEachNodeAttributes: expecting an updater function.");if(e&&!Yt(e))throw new E("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let n,o;for(;n=r.next(),n.done!==!0;)o=n.value,o.attributes=t(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:e||null})}updateEachEdgeAttributes(t,e){if(typeof t!="function")throw new E("Graph.updateEachEdgeAttributes: expecting an updater function.");if(e&&!Yt(e))throw new E("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let n,o,a,s;for(;n=r.next(),n.done!==!0;)o=n.value,a=o.source,s=o.target,o.attributes=t(o.key,o.attributes,a.key,s.key,a.attributes,s.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:e||null})}forEachAdjacencyEntry(t){if(typeof t!="function")throw new E("Graph.forEachAdjacencyEntry: expecting a callback.");Ce(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new E("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Ce(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if(typeof t!="function")throw new E("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Ce(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new E("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Ce(!1,!0,!0,this,t)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):Cr(this._nodes.keys(),this._nodes.size)}forEachNode(t){if(typeof t!="function")throw new E("Graph.forEachNode: expecting a callback.");const e=this._nodes.values();let r,n;for(;r=e.next(),r.done!==!0;)n=r.value,t(n.key,n.attributes)}findNode(t){if(typeof t!="function")throw new E("Graph.findNode: expecting a callback.");const e=this._nodes.values();let r,n;for(;r=e.next(),r.done!==!0;)if(n=r.value,t(n.key,n.attributes))return n.key}mapNodes(t){if(typeof t!="function")throw new E("Graph.mapNode: expecting a callback.");const e=this._nodes.values();let r,n;const o=new Array(this.order);let a=0;for(;r=e.next(),r.done!==!0;)n=r.value,o[a++]=t(n.key,n.attributes);return o}someNode(t){if(typeof t!="function")throw new E("Graph.someNode: expecting a callback.");const e=this._nodes.values();let r,n;for(;r=e.next(),r.done!==!0;)if(n=r.value,t(n.key,n.attributes))return!0;return!1}everyNode(t){if(typeof t!="function")throw new E("Graph.everyNode: expecting a callback.");const e=this._nodes.values();let r,n;for(;r=e.next(),r.done!==!0;)if(n=r.value,!t(n.key,n.attributes))return!1;return!0}filterNodes(t){if(typeof t!="function")throw new E("Graph.filterNodes: expecting a callback.");const e=this._nodes.values();let r,n;const o=[];for(;r=e.next(),r.done!==!0;)n=r.value,t(n.key,n.attributes)&&o.push(n.key);return o}reduceNodes(t,e){if(typeof t!="function")throw new E("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new E("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=e;const n=this._nodes.values();let o,a;for(;o=n.next(),o.done!==!0;)a=o.value,r=t(r,a.key,a.attributes);return r}nodeEntries(){const t=this._nodes.values();return new B(()=>{const e=t.next();if(e.done)return e;const r=e.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const t=new Array(this._nodes.size);let e=0;this._nodes.forEach((n,o)=>{t[e++]=Xn(o,n)});const r=new Array(this._edges.size);return e=0,this._edges.forEach((n,o)=>{r[e++]=Zn(this.type,o,n)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:r}}import(t,e=!1){if(t instanceof C)return t.forEachNode((u,d)=>{e?this.mergeNode(u,d):this.addNode(u,d)}),t.forEachEdge((u,d,c,h,l,f,p)=>{e?p?this.mergeUndirectedEdgeWithKey(u,c,h,d):this.mergeDirectedEdgeWithKey(u,c,h,d):p?this.addUndirectedEdgeWithKey(u,c,h,d):this.addDirectedEdgeWithKey(u,c,h,d)}),this;if(!F(t))throw new E("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!F(t.attributes))throw new E("Graph.import: invalid attributes. Expecting a plain object.");e?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let r,n,o,a,s;if(t.nodes){if(o=t.nodes,!Array.isArray(o))throw new E("Graph.import: invalid nodes. Expecting an array.");for(r=0,n=o.length;r<n;r++){a=o[r],Jn(a);const{key:u,attributes:d}=a;e?this.mergeNode(u,d):this.addNode(u,d)}}if(t.edges){let u=!1;if(this.type==="undirected"&&(u=!0),o=t.edges,!Array.isArray(o))throw new E("Graph.import: invalid edges. Expecting an array.");for(r=0,n=o.length;r<n;r++){s=o[r],Qn(s);const{source:d,target:c,attributes:h,undirected:l=u}=s;let f;"key"in s?(f=e?l?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:l?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,s.key,d,c,h)):(f=e?l?this.mergeUndirectedEdge:this.mergeDirectedEdge:l?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,d,c,h))}}return this}nullCopy(t){const e=new C(P({},this._options,t));return e.replaceAttributes(P({},this.getAttributes())),e}emptyCopy(t){const e=this.nullCopy(t);return this._nodes.forEach((r,n)=>{const o=P({},r.attributes);r=new e.NodeDataClass(n,o),e._nodes.set(n,r)}),e}copy(t){if(t=t||{},typeof t.type=="string"&&t.type!==this.type&&t.type!=="mixed")throw new T(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${t.type}" because this would mean losing information about the current graph.`);if(typeof t.multi=="boolean"&&t.multi!==this.multi&&t.multi!==!0)throw new T("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof t.allowSelfLoops=="boolean"&&t.allowSelfLoops!==this.allowSelfLoops&&t.allowSelfLoops!==!0)throw new T("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const e=this.emptyCopy(t),r=this._edges.values();let n,o;for(;n=r.next(),n.done!==!0;)o=n.value,Mr(e,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,P({},o.attributes));return e}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach((o,a)=>{t[a]=o.attributes});const e={},r={};this._edges.forEach((o,a)=>{const s=o.undirected?"--":"->";let u="",d=o.source.key,c=o.target.key,h;o.undirected&&d>c&&(h=d,d=c,c=h);const l=`(${d})${s}(${c})`;a.startsWith("geid_")?this.multi&&(typeof r[l]>"u"?r[l]=0:r[l]++,u+=`${r[l]}. `):u+=`[${a}]: `,u+=l,e[u]=o.attributes});const n={};for(const o in this)this.hasOwnProperty(o)&&!Kt.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(n[o]=this[o]);return n.attributes=this._attributes,n.nodes=t,n.edges=e,U(n,"constructor",this.constructor),n}}typeof Symbol<"u"&&(C.prototype[Symbol.for("nodejs.util.inspect.custom")]=C.prototype.inspect);ro.forEach(i=>{["add","merge","update"].forEach(t=>{const e=i.name(t),r=t==="add"?Mr:oo;i.generateKey?C.prototype[e]=function(n,o,a){return r(this,e,!0,(i.type||this.type)==="undirected",null,n,o,a,t==="update")}:C.prototype[e]=function(n,o,a,s){return r(this,e,!1,(i.type||this.type)==="undirected",n,o,a,s,t==="update")}})});pn(C);Tn(C);zn(C);qn(C);class Ir extends C{constructor(t){const e=P({type:"directed"},t);if("multi"in e&&e.multi!==!1)throw new E("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(e.type!=="directed")throw new E('DirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class kr extends C{constructor(t){const e=P({type:"undirected"},t);if("multi"in e&&e.multi!==!1)throw new E("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(e.type!=="undirected")throw new E('UndirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class $r extends C{constructor(t){const e=P({multi:!0},t);if("multi"in e&&e.multi!==!0)throw new E("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(e)}}class Ur extends C{constructor(t){const e=P({type:"directed",multi:!0},t);if("multi"in e&&e.multi!==!0)throw new E("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(e.type!=="directed")throw new E('MultiDirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class zr extends C{constructor(t){const e=P({type:"undirected",multi:!0},t);if("multi"in e&&e.multi!==!0)throw new E("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(e.type!=="undirected")throw new E('MultiUndirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}function pe(i){i.from=function(t,e){const r=P({},t.options,e),n=new i(r);return n.import(t),n}}pe(C);pe(Ir);pe(kr);pe($r);pe(Ur);pe(zr);C.Graph=C;C.DirectedGraph=Ir;C.UndirectedGraph=kr;C.MultiGraph=$r;C.MultiDirectedGraph=Ur;C.MultiUndirectedGraph=zr;C.InvalidArgumentsGraphError=E;C.NotFoundGraphError=m;C.UsageGraphError=T;var Q={},wt={},Be={},Br={},A={},jr=function(t){return t!==null&&typeof t=="object"&&typeof t.addUndirectedEdgeWithKey=="function"&&typeof t.dropNode=="function"&&typeof t.multi=="boolean"},I={};Object.defineProperty(I,"__esModule",{value:!0});I.multiplyVec2=I.multiply=I.translate=I.rotate=I.scale=I.identity=void 0;function ao(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}I.identity=ao;function so(i,t,e){return i[0]=t,i[4]=typeof e=="number"?e:t,i}I.scale=so;function uo(i,t){var e=Math.sin(t),r=Math.cos(t);return i[0]=r,i[1]=e,i[3]=-e,i[4]=r,i}I.rotate=uo;function ho(i,t,e){return i[6]=t,i[7]=e,i}I.translate=ho;function co(i,t){var e=i[0],r=i[1],n=i[2],o=i[3],a=i[4],s=i[5],u=i[6],d=i[7],c=i[8],h=t[0],l=t[1],f=t[2],p=t[3],g=t[4],y=t[5],v=t[6],w=t[7],_=t[8];return i[0]=h*e+l*o+f*u,i[1]=h*r+l*a+f*d,i[2]=h*n+l*s+f*c,i[3]=p*e+g*o+y*u,i[4]=p*r+g*a+y*d,i[5]=p*n+g*s+y*c,i[6]=v*e+w*o+_*u,i[7]=v*r+w*a+_*d,i[8]=v*n+w*s+_*c,i}I.multiply=co;function lo(i,t,e){e===void 0&&(e=1);var r=i[0],n=i[1],o=i[3],a=i[4],s=i[6],u=i[7],d=t.x,c=t.y;return{x:d*r+c*o+s*e,y:d*n+c*a+u*e}}I.multiplyVec2=lo;var je={};Object.defineProperty(je,"__esModule",{value:!0});je.HTML_COLORS=void 0;je.HTML_COLORS={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"};var Xt=b&&b.__read||function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},fo=b&&b.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(A,"__esModule",{value:!0});A.validateGraph=A.extractPixel=A.getMatrixImpact=A.matrixFromCamera=A.getCorrectionRatio=A.colorToIndex=A.indexToColor=A.floatColor=A.rgbaToFloat=A.parseColor=A.zIndexOrdering=A.createNormalizationFunction=A.graphExtent=A.getPixelRatio=A.createElement=A.cancelFrame=A.requestFrame=A.assignDeep=A.assign=A.isPlainObject=void 0;var po=fo(jr),R=I,nt=je;function Hr(i){return typeof i=="object"&&i!==null&&i.constructor===Object}A.isPlainObject=Hr;function go(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];i=i||{};for(var r=0,n=t.length;r<n;r++){var o=t[r];o&&Object.assign(i,o)}return i}A.assign=go;function Wr(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];i=i||{};for(var r=0,n=t.length;r<n;r++){var o=t[r];if(o)for(var a in o)Hr(o[a])?i[a]=Wr(i[a],o[a]):i[a]=o[a]}return i}A.assignDeep=Wr;A.requestFrame=typeof requestAnimationFrame<"u"?function(i){return requestAnimationFrame(i)}:function(i){return setTimeout(i,0)};A.cancelFrame=typeof cancelAnimationFrame<"u"?function(i){return cancelAnimationFrame(i)}:function(i){return clearTimeout(i)};function yo(i,t,e){var r=document.createElement(i);if(t)for(var n in t)r.style[n]=t[n];if(e)for(var n in e)r.setAttribute(n,e[n]);return r}A.createElement=yo;function vo(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}A.getPixelRatio=vo;function mo(i){if(!i.order)return{x:[0,1],y:[0,1]};var t=1/0,e=-1/0,r=1/0,n=-1/0;return i.forEachNode(function(o,a){var s=a.x,u=a.y;s<t&&(t=s),s>e&&(e=s),u<r&&(r=u),u>n&&(n=u)}),{x:[t,e],y:[r,n]}}A.graphExtent=mo;function wo(i){var t=Xt(i.x,2),e=t[0],r=t[1],n=Xt(i.y,2),o=n[0],a=n[1],s=Math.max(r-e,a-o),u=(r+e)/2,d=(a+o)/2;(s===0||Math.abs(s)===1/0||isNaN(s))&&(s=1),isNaN(u)&&(u=0),isNaN(d)&&(d=0);var c=function(h){return{x:.5+(h.x-u)/s,y:.5+(h.y-d)/s}};return c.applyTo=function(h){h.x=.5+(h.x-u)/s,h.y=.5+(h.y-d)/s},c.inverse=function(h){return{x:u+s*(h.x-.5),y:d+s*(h.y-.5)}},c.ratio=s,c}A.createNormalizationFunction=wo;function _o(i,t,e){return e.sort(function(r,n){var o=t(r)||0,a=t(n)||0;return o<a?-1:o>a?1:0})}A.zIndexOrdering=_o;var Vr=new Int8Array(4),ot=new Int32Array(Vr.buffer,0,1),bo=new Float32Array(Vr.buffer,0,1),Eo=/^\s*rgba?\s*\(/,xo=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function Yr(i){var t=0,e=0,r=0,n=1;if(i[0]==="#")i.length===4?(t=parseInt(i.charAt(1)+i.charAt(1),16),e=parseInt(i.charAt(2)+i.charAt(2),16),r=parseInt(i.charAt(3)+i.charAt(3),16)):(t=parseInt(i.charAt(1)+i.charAt(2),16),e=parseInt(i.charAt(3)+i.charAt(4),16),r=parseInt(i.charAt(5)+i.charAt(6),16)),i.length===9&&(n=parseInt(i.charAt(7)+i.charAt(8),16)/255);else if(Eo.test(i)){var o=i.match(xo);o&&(t=+o[1],e=+o[2],r=+o[3],o[4]&&(n=+o[4]))}return{r:t,g:e,b:r,a:n}}A.parseColor=Yr;var de={};for(var Le in nt.HTML_COLORS)de[Le]=Kr(nt.HTML_COLORS[Le]),de[nt.HTML_COLORS[Le]]=de[Le];function _t(i,t,e,r,n){return ot[0]=r<<24|e<<16|t<<8|i,n&&(ot[0]=ot[0]&4278190079),bo[0]}A.rgbaToFloat=_t;function Kr(i){if(i=i.toLowerCase(),typeof de[i]<"u")return de[i];var t=Yr(i),e=t.r,r=t.g,n=t.b,o=t.a;o=o*255|0;var a=_t(e,r,n,o,!0);return de[i]=a,a}A.floatColor=Kr;var at={};function Ao(i){if(typeof at[i]<"u")return at[i];var t=(i&16711680)>>>16,e=(i&65280)>>>8,r=i&255,n=255,o=_t(t,e,r,n,!0);return at[i]=o,o}A.indexToColor=Ao;function To(i,t,e,r){return e+(t<<8)+(i<<16)}A.colorToIndex=To;function qr(i,t){var e=i.height/i.width,r=t.height/t.width;return e<1&&r>1||e>1&&r<1?1:Math.min(Math.max(r,1/r),Math.max(1/e,e))}A.getCorrectionRatio=qr;function So(i,t,e,r,n){var o=i.angle,a=i.ratio,s=i.x,u=i.y,d=t.width,c=t.height,h=(0,R.identity)(),l=Math.min(d,c)-2*r,f=qr(t,e);return n?((0,R.multiply)(h,(0,R.translate)((0,R.identity)(),s,u)),(0,R.multiply)(h,(0,R.scale)((0,R.identity)(),a)),(0,R.multiply)(h,(0,R.rotate)((0,R.identity)(),o)),(0,R.multiply)(h,(0,R.scale)((0,R.identity)(),d/l/2/f,c/l/2/f))):((0,R.multiply)(h,(0,R.scale)((0,R.identity)(),2*(l/d)*f,2*(l/c)*f)),(0,R.multiply)(h,(0,R.rotate)((0,R.identity)(),-o)),(0,R.multiply)(h,(0,R.scale)((0,R.identity)(),1/a)),(0,R.multiply)(h,(0,R.translate)((0,R.identity)(),-s,-u))),h}A.matrixFromCamera=So;function Co(i,t,e){var r=(0,R.multiplyVec2)(i,{x:Math.cos(t.angle),y:Math.sin(t.angle)},0),n=r.x,o=r.y;return 1/Math.sqrt(Math.pow(n,2)+Math.pow(o,2))/e.width}A.getMatrixImpact=Co;function Lo(i,t,e,r){var n=r||new Uint8Array(4);return i.readPixels(t,e,1,1,i.RGBA,i.UNSIGNED_BYTE,n),n}A.extractPixel=Lo;function Do(i){if(!(0,po.default)(i))throw new Error("Sigma: invalid graph instance.");i.forEachNode(function(t,e){if(!Number.isFinite(e.x)||!Number.isFinite(e.y))throw new Error("Sigma: Coordinates of node ".concat(t," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}A.validateGraph=Do;var bt={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.cubicInOut=i.cubicOut=i.cubicIn=i.quadraticInOut=i.quadraticOut=i.quadraticIn=i.linear=void 0;var t=function(d){return d};i.linear=t;var e=function(d){return d*d};i.quadraticIn=e;var r=function(d){return d*(2-d)};i.quadraticOut=r;var n=function(d){return(d*=2)<1?.5*d*d:-.5*(--d*(d-2)-1)};i.quadraticInOut=n;var o=function(d){return d*d*d};i.cubicIn=o;var a=function(d){return--d*d*d+1};i.cubicOut=a;var s=function(d){return(d*=2)<1?.5*d*d*d:.5*((d-=2)*d*d+2)};i.cubicInOut=s;var u={linear:i.linear,quadraticIn:i.quadraticIn,quadraticOut:i.quadraticOut,quadraticInOut:i.quadraticInOut,cubicIn:i.cubicIn,cubicOut:i.cubicOut,cubicInOut:i.cubicInOut};i.default=u})(bt);(function(i){var t=b&&b.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(i,"__esModule",{value:!0}),i.animateNodes=i.ANIMATE_DEFAULTS=void 0;var e=A,r=t(bt);i.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150};function n(o,a,s,u){var d=Object.assign({},i.ANIMATE_DEFAULTS,s),c=typeof d.easing=="function"?d.easing:r.default[d.easing],h=Date.now(),l={};for(var f in a){var p=a[f];l[f]={};for(var g in p)l[f][g]=o.getNodeAttribute(f,g)}var y=null,v=function(){y=null;var w=(Date.now()-h)/d.duration;if(w>=1){for(var _ in a){var x=a[_];for(var N in x)o.setNodeAttribute(_,N,x[N])}typeof u=="function"&&u();return}w=c(w);for(var _ in a){var x=a[_],M=l[_];for(var N in x)o.setNodeAttribute(_,N,x[N]*w+M[N]*(1-w))}y=(0,e.requestFrame)(v)};return v(),function(){y&&(0,e.cancelFrame)(y)}}i.animateNodes=n})(Br);var ge={},Ro=b&&b.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(ge,"__esModule",{value:!0});ge.TypedEventEmitter=void 0;var No=Ar,Go=function(i){Ro(t,i);function t(){var e=i.call(this)||this;return e.rawEmitter=e,e}return t}(No.EventEmitter);ge.TypedEventEmitter=Go;var Po=b&&b.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fo=b&&b.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Be,"__esModule",{value:!0});var Oo=Br,Mo=Fo(bt),st=A,Io=ge,De=1.5,ko=function(i){Po(t,i);function t(){var e=i.call(this)||this;return e.x=.5,e.y=.5,e.angle=0,e.ratio=1,e.minRatio=null,e.maxRatio=null,e.nextFrame=null,e.previousState=null,e.enabled=!0,e.previousState=e.getState(),e}return t.from=function(e){var r=new t;return r.setState(e)},t.prototype.enable=function(){return this.enabled=!0,this},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},t.prototype.hasState=function(e){return this.x===e.x&&this.y===e.y&&this.ratio===e.ratio&&this.angle===e.angle},t.prototype.getPreviousState=function(){var e=this.previousState;return e?{x:e.x,y:e.y,angle:e.angle,ratio:e.ratio}:null},t.prototype.getBoundedRatio=function(e){var r=e;return typeof this.minRatio=="number"&&(r=Math.max(r,this.minRatio)),typeof this.maxRatio=="number"&&(r=Math.min(r,this.maxRatio)),r},t.prototype.validateState=function(e){var r={};return typeof e.x=="number"&&(r.x=e.x),typeof e.y=="number"&&(r.y=e.y),typeof e.angle=="number"&&(r.angle=e.angle),typeof e.ratio=="number"&&(r.ratio=this.getBoundedRatio(e.ratio)),r},t.prototype.isAnimated=function(){return!!this.nextFrame},t.prototype.setState=function(e){if(!this.enabled)return this;this.previousState=this.getState();var r=this.validateState(e);return typeof r.x=="number"&&(this.x=r.x),typeof r.y=="number"&&(this.y=r.y),typeof r.angle=="number"&&(this.angle=r.angle),typeof r.ratio=="number"&&(this.ratio=r.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this},t.prototype.updateState=function(e){return this.setState(e(this.getState())),this},t.prototype.animate=function(e,r,n){var o=this;if(this.enabled){var a=Object.assign({},Oo.ANIMATE_DEFAULTS,r),s=this.validateState(e),u=typeof a.easing=="function"?a.easing:Mo.default[a.easing],d=Date.now(),c=this.getState(),h=function(){var l=(Date.now()-d)/a.duration;if(l>=1){o.nextFrame=null,o.setState(s),o.animationCallback&&(o.animationCallback.call(null),o.animationCallback=void 0);return}var f=u(l),p={};typeof s.x=="number"&&(p.x=c.x+(s.x-c.x)*f),typeof s.y=="number"&&(p.y=c.y+(s.y-c.y)*f),typeof s.angle=="number"&&(p.angle=c.angle+(s.angle-c.angle)*f),typeof s.ratio=="number"&&(p.ratio=c.ratio+(s.ratio-c.ratio)*f),o.setState(p),o.nextFrame=(0,st.requestFrame)(h)};this.nextFrame?((0,st.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,st.requestFrame)(h)):h(),this.animationCallback=n}},t.prototype.animatedZoom=function(e){if(!e)this.animate({ratio:this.ratio/De});else{if(typeof e=="number")return this.animate({ratio:this.ratio/e});this.animate({ratio:this.ratio/(e.factor||De)},e)}},t.prototype.animatedUnzoom=function(e){if(!e)this.animate({ratio:this.ratio*De});else{if(typeof e=="number")return this.animate({ratio:this.ratio*e});this.animate({ratio:this.ratio*(e.factor||De)},e)}},t.prototype.animatedReset=function(e){this.animate({x:.5,y:.5,ratio:1,angle:0},e)},t.prototype.copy=function(){return t.from(this.getState())},t}(Io.TypedEventEmitter);Be.default=ko;var He={},O={},$o=b&&b.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),he=b&&b.__assign||function(){return he=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},he.apply(this,arguments)};Object.defineProperty(O,"__esModule",{value:!0});O.getWheelDelta=O.getTouchCoords=O.getTouchesArray=O.getWheelCoords=O.getMouseCoords=O.getPosition=void 0;var Uo=ge;function Et(i,t){var e=t.getBoundingClientRect();return{x:i.clientX-e.left,y:i.clientY-e.top}}O.getPosition=Et;function Xr(i,t){var e=he(he({},Et(i,t)),{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){e.sigmaDefaultPrevented=!0},original:i});return e}O.getMouseCoords=Xr;function zo(i,t){return he(he({},Xr(i,t)),{delta:Jr(i)})}O.getWheelCoords=zo;var Bo=2;function Zr(i){for(var t=[],e=0,r=Math.min(i.length,Bo);e<r;e++)t.push(i[e]);return t}O.getTouchesArray=Zr;function jo(i,t){return{touches:Zr(i.touches).map(function(e){return Et(e,t)}),original:i}}O.getTouchCoords=jo;function Jr(i){if(typeof i.deltaY<"u")return i.deltaY*-3/360;if(typeof i.detail<"u")return i.detail/-9;throw new Error("Captor: could not extract delta from event.")}O.getWheelDelta=Jr;var Ho=function(i){$o(t,i);function t(e,r){var n=i.call(this)||this;return n.container=e,n.renderer=r,n}return t}(Uo.TypedEventEmitter);O.default=Ho;var Wo=b&&b.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vo=b&&b.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e);var n=Object.getOwnPropertyDescriptor(t,e);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,n)}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),Yo=b&&b.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),Ko=b&&b.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&Vo(t,i,e);return Yo(t,i),t};Object.defineProperty(He,"__esModule",{value:!0});var k=Ko(O),qo=100,Xo=3,Zo=200,Zt=3,Jt=250,Qt=1.7,Jo=300,Qo=2.2,ea=200,ta=function(i){Wo(t,i);function t(e,r){var n=i.call(this,e,r)||this;return n.enabled=!0,n.draggedEvents=0,n.downStartTime=null,n.lastMouseX=null,n.lastMouseY=null,n.isMouseDown=!1,n.isMoving=!1,n.movingTimeout=null,n.startCameraState=null,n.clicks=0,n.doubleClickTimeout=null,n.currentWheelDirection=0,n.handleClick=n.handleClick.bind(n),n.handleRightClick=n.handleRightClick.bind(n),n.handleDown=n.handleDown.bind(n),n.handleUp=n.handleUp.bind(n),n.handleMove=n.handleMove.bind(n),n.handleWheel=n.handleWheel.bind(n),n.handleOut=n.handleOut.bind(n),e.addEventListener("click",n.handleClick,!1),e.addEventListener("contextmenu",n.handleRightClick,!1),e.addEventListener("mousedown",n.handleDown,!1),e.addEventListener("wheel",n.handleWheel,!1),e.addEventListener("mouseout",n.handleOut,!1),document.addEventListener("mousemove",n.handleMove,!1),document.addEventListener("mouseup",n.handleUp,!1),n}return t.prototype.kill=function(){var e=this.container;e.removeEventListener("click",this.handleClick),e.removeEventListener("contextmenu",this.handleRightClick),e.removeEventListener("mousedown",this.handleDown),e.removeEventListener("wheel",this.handleWheel),e.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)},t.prototype.handleClick=function(e){var r=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(e);setTimeout(function(){r.clicks=0,r.doubleClickTimeout=null},Jo),this.draggedEvents<Xo&&this.emit("click",(0,k.getMouseCoords)(e,this.container))}},t.prototype.handleRightClick=function(e){this.enabled&&this.emit("rightClick",(0,k.getMouseCoords)(e,this.container))},t.prototype.handleDoubleClick=function(e){if(this.enabled){e.preventDefault(),e.stopPropagation();var r=(0,k.getMouseCoords)(e,this.container);if(this.emit("doubleClick",r),!r.sigmaDefaultPrevented){var n=this.renderer.getCamera(),o=n.getBoundedRatio(n.getState().ratio/Qo);n.animate(this.renderer.getViewportZoomedState((0,k.getPosition)(e,this.container),o),{easing:"quadraticInOut",duration:ea})}}},t.prototype.handleDown=function(e){if(this.enabled){if(e.button===0){this.startCameraState=this.renderer.getCamera().getState();var r=(0,k.getPosition)(e,this.container),n=r.x,o=r.y;this.lastMouseX=n,this.lastMouseY=o,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",(0,k.getMouseCoords)(e,this.container))}},t.prototype.handleUp=function(e){var r=this;if(!(!this.enabled||!this.isMouseDown)){var n=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var o=(0,k.getPosition)(e,this.container),a=o.x,s=o.y,u=n.getState(),d=n.getPreviousState()||{x:0,y:0};this.isMoving?n.animate({x:u.x+Zt*(u.x-d.x),y:u.y+Zt*(u.y-d.y)},{duration:Zo,easing:"quadraticOut"}):(this.lastMouseX!==a||this.lastMouseY!==s)&&n.setState({x:u.x,y:u.y}),this.isMoving=!1,setTimeout(function(){var c=r.draggedEvents>0;r.draggedEvents=0,c&&r.renderer.refresh()},0),this.emit("mouseup",(0,k.getMouseCoords)(e,this.container))}},t.prototype.handleMove=function(e){var r=this;if(this.enabled){var n=(0,k.getMouseCoords)(e,this.container);if(this.emit("mousemovebody",n),e.target===this.container&&this.emit("mousemove",n),!n.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.movingTimeout=null,r.isMoving=!1},qo);var o=this.renderer.getCamera(),a=(0,k.getPosition)(e,this.container),s=a.x,u=a.y,d=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),c=this.renderer.viewportToFramedGraph({x:s,y:u}),h=d.x-c.x,l=d.y-c.y,f=o.getState(),p=f.x+h,g=f.y+l;o.setState({x:p,y:g}),this.lastMouseX=s,this.lastMouseY=u,e.preventDefault(),e.stopPropagation()}}},t.prototype.handleWheel=function(e){var r=this;if(this.enabled){e.preventDefault(),e.stopPropagation();var n=(0,k.getWheelDelta)(e);if(n){var o=(0,k.getWheelCoords)(e,this.container);if(this.emit("wheel",o),!o.sigmaDefaultPrevented){var a=n>0?1/Qt:Qt,s=this.renderer.getCamera(),u=s.getBoundedRatio(s.getState().ratio*a),d=n>0?1:-1,c=Date.now();this.currentWheelDirection===d&&this.lastWheelTriggerTime&&c-this.lastWheelTriggerTime<Jt/5||(s.animate(this.renderer.getViewportZoomedState((0,k.getPosition)(e,this.container),u),{easing:"quadraticOut",duration:Jt},function(){r.currentWheelDirection=0}),this.currentWheelDirection=d,this.lastWheelTriggerTime=c)}}}},t.prototype.handleOut=function(){},t}(k.default);He.default=ta;var ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.edgeLabelsToDisplayFromNodes=ce.LabelGrid=void 0;var er=function(){function i(t,e){this.key=t,this.size=e}return i.compare=function(t,e){return t.size>e.size?-1:t.size<e.size||t.key>e.key?1:-1},i}(),ra=function(){function i(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}return i.prototype.resizeAndClear=function(t,e){this.width=t.width,this.height=t.height,this.cellSize=e,this.columns=Math.ceil(t.width/e),this.rows=Math.ceil(t.height/e),this.cells={}},i.prototype.getIndex=function(t){var e=Math.floor(t.x/this.cellSize),r=Math.floor(t.y/this.cellSize);return r*this.columns+e},i.prototype.add=function(t,e,r){var n=new er(t,e),o=this.getIndex(r),a=this.cells[o];a||(a=[],this.cells[o]=a),a.push(n)},i.prototype.organize=function(){for(var t in this.cells){var e=this.cells[t];e.sort(er.compare)}},i.prototype.getLabelsToDisplay=function(t,e){var r=this.cellSize*this.cellSize,n=r/t/t,o=n*e/r,a=Math.ceil(o),s=[];for(var u in this.cells)for(var d=this.cells[u],c=0;c<Math.min(a,d.length);c++)s.push(d[c].key);return s},i}();ce.LabelGrid=ra;function ia(i){var t=i.graph,e=i.hoveredNode,r=i.highlightedNodes,n=i.displayedNodeLabels,o=[];return t.forEachEdge(function(a,s,u,d){(u===e||d===e||r.has(u)||r.has(d)||n.has(u)&&n.has(d))&&o.push(a)}),o}ce.edgeLabelsToDisplayFromNodes=ia;var Qr={},xt={},ee={},ie={},te={};Object.defineProperty(te,"__esModule",{value:!0});te.loadProgram=te.loadFragmentShader=te.loadVertexShader=void 0;function ei(i,t,e){var r=i==="VERTEX"?t.VERTEX_SHADER:t.FRAGMENT_SHADER,n=t.createShader(r);if(n===null)throw new Error("loadShader: error while creating the shader");t.shaderSource(n,e),t.compileShader(n);var o=t.getShaderParameter(n,t.COMPILE_STATUS);if(!o){var a=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(`loadShader: error while compiling the shader:
`.concat(a,`
`).concat(e))}return n}function na(i,t){return ei("VERTEX",i,t)}te.loadVertexShader=na;function oa(i,t){return ei("FRAGMENT",i,t)}te.loadFragmentShader=oa;function aa(i,t){var e=i.createProgram();if(e===null)throw new Error("loadProgram: error while creating the program.");var r,n;for(r=0,n=t.length;r<n;r++)i.attachShader(e,t[r]);i.linkProgram(e);var o=i.getProgramParameter(e,i.LINK_STATUS);if(!o)throw i.deleteProgram(e),new Error("loadProgram: error while linking the program.");return e}te.loadProgram=aa;var Fe=b&&b.__assign||function(){return Fe=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Fe.apply(this,arguments)},V;Object.defineProperty(ie,"__esModule",{value:!0});ie.Program=ie.AbstractProgram=void 0;var ut=te,tr=`#define PICKING_MODE
`,sa=(V={},V[WebGL2RenderingContext.BOOL]=1,V[WebGL2RenderingContext.BYTE]=1,V[WebGL2RenderingContext.UNSIGNED_BYTE]=1,V[WebGL2RenderingContext.SHORT]=2,V[WebGL2RenderingContext.UNSIGNED_SHORT]=2,V[WebGL2RenderingContext.INT]=4,V[WebGL2RenderingContext.UNSIGNED_INT]=4,V[WebGL2RenderingContext.FLOAT]=4,V);function ua(i){return i.normalized?1:i.size}function dt(i){var t=0;return i.forEach(function(e){return t+=ua(e)}),t}var da=function(){function i(t,e,r){}return i}();ie.AbstractProgram=da;var ha=function(){function i(t,e,r){this.array=new Float32Array,this.constantArray=new Float32Array,this.capacity=0,this.verticesCount=0;var n=this.getDefinition();if(this.VERTICES=n.VERTICES,this.VERTEX_SHADER_SOURCE=n.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=n.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=n.UNIFORMS,this.ATTRIBUTES=n.ATTRIBUTES,this.METHOD=n.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in n?n.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in n?n.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in n,this.ATTRIBUTES_ITEMS_COUNT=dt(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=r,this.normalProgram=this.getProgramInfo("normal",t,n.VERTEX_SHADER_SOURCE,n.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=e?this.getProgramInfo("pick",t,tr+n.VERTEX_SHADER_SOURCE,tr+n.FRAGMENT_SHADER_SOURCE,e):null,this.isInstanced){var o=dt(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*o);for(var a=0;a<this.CONSTANT_DATA.length;a++){var s=this.CONSTANT_DATA[a];if(s.length!==o)throw new Error("Program: error while getting constant data (one vector has ".concat(s.length," items instead of ").concat(o,")"));for(var u=0;u<s.length;u++)this.constantArray[a*o+u]=s[u]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return i.prototype.getProgramInfo=function(t,e,r,n,o){var a=this.getDefinition(),s=e.createBuffer();if(s===null)throw new Error("Program: error while creating the WebGL buffer.");var u=(0,ut.loadVertexShader)(e,r),d=(0,ut.loadFragmentShader)(e,n),c=(0,ut.loadProgram)(e,[u,d]),h={};a.UNIFORMS.forEach(function(p){var g=e.getUniformLocation(c,p);g&&(h[p]=g)});var l={};a.ATTRIBUTES.forEach(function(p){l[p.name]=e.getAttribLocation(c,p.name)});var f;if("CONSTANT_ATTRIBUTES"in a&&(a.CONSTANT_ATTRIBUTES.forEach(function(p){l[p.name]=e.getAttribLocation(c,p.name)}),f=e.createBuffer(),f===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:t,program:c,gl:e,frameBuffer:o,buffer:s,constantBuffer:f||{},uniformLocations:h,attributeLocations:l,isPicking:t==="pick"}},i.prototype.bindProgram=function(t){var e=this,r=0,n=t.gl,o=t.buffer;this.isInstanced?(n.bindBuffer(n.ARRAY_BUFFER,t.constantBuffer),r=0,this.CONSTANT_ATTRIBUTES.forEach(function(a){return r+=e.bindAttribute(a,t,r,!1)}),n.bufferData(n.ARRAY_BUFFER,this.constantArray,n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,t.buffer),r=0,this.ATTRIBUTES.forEach(function(a){return r+=e.bindAttribute(a,t,r,!0)}),n.bufferData(n.ARRAY_BUFFER,this.array,n.DYNAMIC_DRAW)):(n.bindBuffer(n.ARRAY_BUFFER,o),r=0,this.ATTRIBUTES.forEach(function(a){return r+=e.bindAttribute(a,t,r)}),n.bufferData(n.ARRAY_BUFFER,this.array,n.DYNAMIC_DRAW)),n.bindBuffer(n.ARRAY_BUFFER,null)},i.prototype.unbindProgram=function(t){var e=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(r){return e.unbindAttribute(r,t,!1)}),this.ATTRIBUTES.forEach(function(r){return e.unbindAttribute(r,t,!0)})):this.ATTRIBUTES.forEach(function(r){return e.unbindAttribute(r,t)})},i.prototype.bindAttribute=function(t,e,r,n){var o=sa[t.type];if(typeof o!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(t.type,'"'));var a=e.attributeLocations[t.name],s=e.gl;if(a!==-1){s.enableVertexAttribArray(a);var u=this.isInstanced?(n?this.ATTRIBUTES_ITEMS_COUNT:dt(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(s.vertexAttribPointer(a,t.size,t.type,t.normalized||!1,u,r),this.isInstanced&&n)if(s instanceof WebGL2RenderingContext)s.vertexAttribDivisor(a,1);else{var d=s.getExtension("ANGLE_instanced_arrays");d&&d.vertexAttribDivisorANGLE(a,1)}}return t.size*o},i.prototype.unbindAttribute=function(t,e,r){var n=e.attributeLocations[t.name],o=e.gl;if(n!==-1&&(o.disableVertexAttribArray(n),this.isInstanced&&r))if(o instanceof WebGL2RenderingContext)o.vertexAttribDivisor(n,0);else{var a=o.getExtension("ANGLE_instanced_arrays");a&&a.vertexAttribDivisorANGLE(n,0)}},i.prototype.reallocate=function(t){t!==this.capacity&&(this.capacity=t,this.verticesCount=this.VERTICES*t,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))},i.prototype.hasNothingToRender=function(){return this.verticesCount===0},i.prototype.renderProgram=function(t,e){var r=e.gl,n=e.program;r.enable(r.BLEND),r.useProgram(n),this.setUniforms(t,e),this.drawWebGL(this.METHOD,e)},i.prototype.render=function(t){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,t.width*t.pixelRatio/t.downSizingRatio,t.height*t.pixelRatio/t.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(Fe(Fe({},t),{pixelRatio:t.pixelRatio/t.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,t.width*t.pixelRatio,t.height*t.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(t,this.normalProgram),this.unbindProgram(this.normalProgram))},i.prototype.drawWebGL=function(t,e){var r=e.gl,n=e.frameBuffer;if(r.bindFramebuffer(r.FRAMEBUFFER,n),!this.isInstanced)r.drawArrays(t,0,this.verticesCount);else if(r instanceof WebGL2RenderingContext)r.drawArraysInstanced(t,0,this.VERTICES,this.capacity);else{var o=r.getExtension("ANGLE_instanced_arrays");o&&o.drawArraysInstancedANGLE(t,0,this.VERTICES,this.capacity)}},i}();ie.Program=ha;var ti=b&&b.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(ee,"__esModule",{value:!0});ee.createNodeCompoundProgram=ee.NodeProgram=ee.AbstractNodeProgram=void 0;var ri=ie,ca=A,la=function(i){ti(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t}(ri.AbstractProgram);ee.AbstractNodeProgram=la;var fa=function(i){ti(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.kill=function(){},t.prototype.process=function(e,r,n){var o=r*this.STRIDE;if(n.hidden){for(var a=o+this.STRIDE;o<a;o++)this.array[o]=0;return}return this.processVisibleItem((0,ca.indexToColor)(e),o,n)},t.drawLabel=void 0,t.drawHover=void 0,t}(ri.Program);ee.NodeProgram=fa;function pa(i,t,e){var r;return r=function(){function n(o,a,s){this.programs=i.map(function(u){return new u(o,a,s)})}return n.prototype.reallocate=function(o){this.programs.forEach(function(a){return a.reallocate(o)})},n.prototype.process=function(o,a,s){this.programs.forEach(function(u){return u.process(o,a,s)})},n.prototype.render=function(o){this.programs.forEach(function(a){return a.render(o)})},n.prototype.kill=function(){this.programs.forEach(function(o){return o.kill()})},n}(),r.drawLabel=t,r.drawHover=e,r}ee.createNodeCompoundProgram=pa;var ii={exports:{}};(()=>{var i={d:(r,n)=>{for(var o in n)i.o(n,o)&&!i.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:n[o]})},o:(r,n)=>Object.prototype.hasOwnProperty.call(r,n),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};i.r(t),i.d(t,{default:()=>e});const e=`attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;

uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform mat3 u_matrix;

varying vec4 v_color;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  gl_Position = vec4(
    (u_matrix * vec3(a_position, 1)).xy,
    0,
    1
  );

  // Multiply the point size twice:
  //  - x SCALING_RATIO to correct the canvas scaling
  //  - x 2 to correct the formulae
  gl_PointSize = a_size / u_sizeRatio * u_pixelRatio * 2.0;

  v_border = (0.5 / a_size) * u_sizeRatio;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`;ii.exports=t})();var ga=ii.exports,ni={exports:{}};(()=>{var i={d:(r,n)=>{for(var o in n)i.o(n,o)&&!i.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:n[o]})},o:(r,n)=>Object.prototype.hasOwnProperty.call(r,n),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};i.r(t),i.d(t,{default:()=>e});const e=`precision mediump float;

varying vec4 v_color;
varying float v_border;

const float radius = 0.5;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  vec2 m = gl_PointCoord - vec2(0.5, 0.5);
  float dist = radius - length(m);

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > v_border)
    gl_FragColor = v_color;
  else
    gl_FragColor = transparent;

  #else
  float t = 0.0;
  if (dist > v_border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / v_border;

  gl_FragColor = mix(transparent, v_color, t);
  #endif
}
`;ni.exports=t})();var ya=ni.exports,va=b&&b.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),oi=b&&b.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(xt,"__esModule",{value:!0});var ma=A,wa=ee,_a=oi(ga),ba=oi(ya),rr=WebGLRenderingContext.UNSIGNED_BYTE,ir=WebGLRenderingContext.FLOAT,Ea=["u_sizeRatio","u_pixelRatio","u_matrix"],xa=function(i){va(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getDefinition=function(){return{VERTICES:1,VERTEX_SHADER_SOURCE:_a.default,FRAGMENT_SHADER_SOURCE:ba.default,METHOD:WebGLRenderingContext.POINTS,UNIFORMS:Ea,ATTRIBUTES:[{name:"a_position",size:2,type:ir},{name:"a_size",size:1,type:ir},{name:"a_color",size:4,type:rr,normalized:!0},{name:"a_id",size:4,type:rr,normalized:!0}]}},t.prototype.processVisibleItem=function(e,r,n){var o=this.array;o[r++]=n.x,o[r++]=n.y,o[r++]=n.size,o[r++]=(0,ma.floatColor)(n.color),o[r++]=e},t.prototype.setUniforms=function(e,r){var n=e.sizeRatio,o=e.pixelRatio,a=e.matrix,s=r.gl,u=r.uniformLocations,d=u.u_sizeRatio,c=u.u_pixelRatio,h=u.u_matrix;s.uniform1f(c,o),s.uniform1f(d,n),s.uniformMatrix3fv(h,!1,a)},t}(wa.NodeProgram);xt.default=xa;var We={},Y={},ai=b&&b.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(Y,"__esModule",{value:!0});Y.createEdgeCompoundProgram=Y.EdgeProgram=Y.AbstractEdgeProgram=void 0;var si=ie,Aa=A,Ta=function(i){ai(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t}(si.AbstractProgram);Y.AbstractEdgeProgram=Ta;var Sa=function(i){ai(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.kill=function(){},t.prototype.process=function(e,r,n,o,a){var s=r*this.STRIDE;if(a.hidden||n.hidden||o.hidden){for(var u=s+this.STRIDE;s<u;s++)this.array[s]=0;return}return this.processVisibleItem((0,Aa.indexToColor)(e),s,n,o,a)},t.drawLabel=void 0,t}(si.Program);Y.EdgeProgram=Sa;function Ca(i,t){var e;return e=function(){function r(n,o,a){this.programs=i.map(function(s){return new s(n,o,a)})}return r.prototype.reallocate=function(n){this.programs.forEach(function(o){return o.reallocate(n)})},r.prototype.process=function(n,o,a,s,u){this.programs.forEach(function(d){return d.process(n,o,a,s,u)})},r.prototype.render=function(n){this.programs.forEach(function(o){return o.render(n)})},r.prototype.kill=function(){this.programs.forEach(function(n){return n.kill()})},r}(),e.drawLabel=t,e}Y.createEdgeCompoundProgram=Ca;var ui={exports:{}};(()=>{var i={d:(r,n)=>{for(var o in n)i.o(n,o)&&!i.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:n[o]})},o:(r,n)=>Object.prototype.hasOwnProperty.call(r,n),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};i.r(t),i.d(t,{default:()=>e});const e=`attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;

void main() {
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least \`minThickness\` pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`;ui.exports=t})();var La=ui.exports,di={exports:{}};(()=>{var i={d:(r,n)=>{for(var o in n)i.o(n,o)&&!i.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:n[o]})},o:(r,n)=>Object.prototype.hasOwnProperty.call(r,n),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};i.r(t),i.d(t,{default:()=>e});const e=`precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float feather = 0.001;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`;di.exports=t})();var Da=di.exports,Ra=b&&b.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),hi=b&&b.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(We,"__esModule",{value:!0});var Na=A,Ga=Y,Pa=hi(La),Fa=hi(Da),nr=WebGLRenderingContext.UNSIGNED_BYTE,we=WebGLRenderingContext.FLOAT,Oa=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio"],Ma=function(i){Ra(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getDefinition=function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:Pa.default,FRAGMENT_SHADER_SOURCE:Fa.default,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Oa,ATTRIBUTES:[{name:"a_positionStart",size:2,type:we},{name:"a_positionEnd",size:2,type:we},{name:"a_normal",size:2,type:we},{name:"a_color",size:4,type:nr,normalized:!0},{name:"a_id",size:4,type:nr,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:we},{name:"a_normalCoef",size:1,type:we}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}},t.prototype.processVisibleItem=function(e,r,n,o,a){var s=a.size||1,u=n.x,d=n.y,c=o.x,h=o.y,l=(0,Na.floatColor)(a.color),f=c-u,p=h-d,g=f*f+p*p,y=0,v=0;g&&(g=1/Math.sqrt(g),y=-p*g*s,v=f*g*s);var w=this.array;w[r++]=u,w[r++]=d,w[r++]=c,w[r++]=h,w[r++]=y,w[r++]=v,w[r++]=l,w[r++]=e},t.prototype.setUniforms=function(e,r){var n=r.gl,o=r.uniformLocations,a=o.u_matrix,s=o.u_zoomRatio,u=o.u_correctionRatio,d=o.u_sizeRatio;n.uniformMatrix3fv(a,!1,e.matrix),n.uniform1f(s,e.zoomRatio),n.uniform1f(d,e.sizeRatio),n.uniform1f(u,e.correctionRatio)},t}(Ga.EdgeProgram);We.default=Ma;var At={},Tt={},ci={exports:{}};(()=>{var i={d:(r,n)=>{for(var o in n)i.o(n,o)&&!i.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:n[o]})},o:(r,n)=>Object.prototype.hasOwnProperty.call(r,n),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};i.r(t),i.d(t,{default:()=>e});const e=`attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;
const float arrowHeadWidthLengthRatio = 0.66;
const float arrowHeadLengthThicknessRatio = 2.5;

void main() {
  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;
  float webGLArrowHeadHalfWidth = webGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadHalfWidth * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadHalfWidth * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadHalfWidth * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadHalfWidth * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`;ci.exports=t})();var Ia=ci.exports,li={exports:{}};(()=>{var i={d:(r,n)=>{for(var o in n)i.o(n,o)&&!i.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:n[o]})},o:(r,n)=>Object.prototype.hasOwnProperty.call(r,n),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};i.r(t),i.d(t,{default:()=>e});const e=`precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`;li.exports=t})();var ka=li.exports,$a=b&&b.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),fi=b&&b.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Tt,"__esModule",{value:!0});var Ua=A,za=Y,Ba=fi(Ia),ja=fi(ka),or=WebGLRenderingContext.UNSIGNED_BYTE,Re=WebGLRenderingContext.FLOAT,Ha=["u_matrix","u_sizeRatio","u_correctionRatio"],Wa=function(i){$a(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getDefinition=function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:Ba.default,FRAGMENT_SHADER_SOURCE:ja.default,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Ha,ATTRIBUTES:[{name:"a_position",size:2,type:Re},{name:"a_normal",size:2,type:Re},{name:"a_radius",size:1,type:Re},{name:"a_color",size:4,type:or,normalized:!0},{name:"a_id",size:4,type:or,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:Re}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}},t.prototype.processVisibleItem=function(e,r,n,o,a){var s=a.size||1,u=o.size||1,d=n.x,c=n.y,h=o.x,l=o.y,f=(0,Ua.floatColor)(a.color),p=h-d,g=l-c,y=p*p+g*g,v=0,w=0;y&&(y=1/Math.sqrt(y),v=-g*y*s,w=p*y*s);var _=this.array;_[r++]=h,_[r++]=l,_[r++]=-v,_[r++]=-w,_[r++]=u,_[r++]=f,_[r++]=e},t.prototype.setUniforms=function(e,r){var n=r.gl,o=r.uniformLocations,a=o.u_matrix,s=o.u_sizeRatio,u=o.u_correctionRatio;n.uniformMatrix3fv(a,!1,e.matrix),n.uniform1f(s,e.sizeRatio),n.uniform1f(u,e.correctionRatio)},t}(za.EdgeProgram);Tt.default=Wa;var St={},pi={exports:{}};(()=>{var i={d:(r,n)=>{for(var o in n)i.o(n,o)&&!i.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:n[o]})},o:(r,n)=>Object.prototype.hasOwnProperty.call(r,n),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};i.r(t),i.d(t,{default:()=>e});const e=`attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;
const float arrowHeadLengthThicknessRatio = 2.5;

void main() {
  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`;pi.exports=t})();var Va=pi.exports,Ya=b&&b.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Oe=b&&b.__assign||function(){return Oe=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Oe.apply(this,arguments)},gi=b&&b.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(St,"__esModule",{value:!0});var Ka=gi(We),qa=gi(Va),Xa=A,ar=WebGLRenderingContext.UNSIGNED_BYTE,re=WebGLRenderingContext.FLOAT,Za=function(i){Ya(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getDefinition=function(){return Oe(Oe({},i.prototype.getDefinition.call(this)),{VERTEX_SHADER_SOURCE:qa.default,ATTRIBUTES:[{name:"a_positionStart",size:2,type:re},{name:"a_positionEnd",size:2,type:re},{name:"a_normal",size:2,type:re},{name:"a_color",size:4,type:ar,normalized:!0},{name:"a_id",size:4,type:ar,normalized:!0},{name:"a_radius",size:1,type:re}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:re},{name:"a_normalCoef",size:1,type:re},{name:"a_radiusCoef",size:1,type:re}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]})},t.prototype.processVisibleItem=function(e,r,n,o,a){var s=a.size||1,u=n.x,d=n.y,c=o.x,h=o.y,l=(0,Xa.floatColor)(a.color),f=c-u,p=h-d,g=o.size||1,y=f*f+p*p,v=0,w=0;y&&(y=1/Math.sqrt(y),v=-p*y*s,w=f*y*s);var _=this.array;_[r++]=u,_[r++]=d,_[r++]=c,_[r++]=h,_[r++]=v,_[r++]=w,_[r++]=l,_[r++]=e,_[r++]=g},t}(Ka.default);St.default=Za;var yi=b&&b.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(At,"__esModule",{value:!0});var Ja=Y,Qa=yi(Tt),es=yi(St),ts=(0,Ja.createEdgeCompoundProgram)([es.default,Qa.default]);At.default=ts;var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.drawStraightEdgeLabel=void 0;function rs(i,t,e,r,n){var o=n.edgeLabelSize,a=n.edgeLabelFont,s=n.edgeLabelWeight,u=n.edgeLabelColor.attribute?t[n.edgeLabelColor.attribute]||n.edgeLabelColor.color||"#000":n.edgeLabelColor.color,d=t.label;if(d){i.fillStyle=u,i.font="".concat(s," ").concat(o,"px ").concat(a);var c=e.size,h=r.size,l=e.x,f=e.y,p=r.x,g=r.y,y=(l+p)/2,v=(f+g)/2,w=p-l,_=g-f,x=Math.sqrt(w*w+_*_);if(!(x<c+h)){l+=w*c/x,f+=_*c/x,p-=w*h/x,g-=_*h/x,y=(l+p)/2,v=(f+g)/2,w=p-l,_=g-f,x=Math.sqrt(w*w+_*_);var N=i.measureText(d).width;if(N>x){var M="";for(d=d+M,N=i.measureText(d).width;N>x&&d.length>1;)d=d.slice(0,-2)+M,N=i.measureText(d).width;if(d.length<4)return}var j;w>0?_>0?j=Math.acos(w/x):j=Math.asin(_/x):_>0?j=Math.acos(w/x)+Math.PI:j=Math.asin(w/x)+Math.PI/2,i.save(),i.translate(y,v),i.rotate(j),i.fillText(d,-N/2,t.size/2+o),i.restore()}}}Ve.drawStraightEdgeLabel=rs;var _e={};Object.defineProperty(_e,"__esModule",{value:!0});_e.drawDiscNodeLabel=void 0;function is(i,t,e){if(t.label){var r=e.labelSize,n=e.labelFont,o=e.labelWeight,a=e.labelColor.attribute?t[e.labelColor.attribute]||e.labelColor.color||"#000":e.labelColor.color;i.fillStyle=a,i.font="".concat(o," ").concat(r,"px ").concat(n),i.fillText(t.label,t.x+t.size+3,t.y+r/3)}}_e.drawDiscNodeLabel=is;var Ye={};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.drawDiscNodeHover=void 0;var ns=_e;function os(i,t,e){var r=e.labelSize,n=e.labelFont,o=e.labelWeight;i.font="".concat(o," ").concat(r,"px ").concat(n),i.fillStyle="#FFF",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=8,i.shadowColor="#000";var a=2;if(typeof t.label=="string"){var s=i.measureText(t.label).width,u=Math.round(s+5),d=Math.round(r+2*a),c=Math.max(t.size,r/2)+a,h=Math.asin(d/2/c),l=Math.sqrt(Math.abs(Math.pow(c,2)-Math.pow(d/2,2)));i.beginPath(),i.moveTo(t.x+l,t.y+d/2),i.lineTo(t.x+c+u,t.y+d/2),i.lineTo(t.x+c+u,t.y-d/2),i.lineTo(t.x+l,t.y-d/2),i.arc(t.x,t.y,c,h,-h),i.closePath(),i.fill()}else i.beginPath(),i.arc(t.x,t.y,t.size+a,0,Math.PI*2),i.closePath(),i.fill();i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,(0,ns.drawDiscNodeLabel)(i,t,e)}Ye.drawDiscNodeHover=os;(function(i){var t=b&&b.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(i,"__esModule",{value:!0}),i.resolveSettings=i.validateSettings=i.DEFAULT_EDGE_PROGRAM_CLASSES=i.DEFAULT_NODE_PROGRAM_CLASSES=i.DEFAULT_SETTINGS=void 0;var e=A,r=t(xt),n=t(We),o=t(At),a=Ve,s=_e,u=Ye;i.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",defaultDrawEdgeLabel:a.drawStraightEdgeLabel,defaultDrawNodeLabel:s.drawDiscNodeLabel,defaultDrawNodeHover:u.drawDiscNodeHover,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},i.DEFAULT_NODE_PROGRAM_CLASSES={circle:r.default},i.DEFAULT_EDGE_PROGRAM_CLASSES={arrow:o.default,line:n.default};function d(h){if(typeof h.labelDensity!="number"||h.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var l=h.minCameraRatio,f=h.maxCameraRatio;if(typeof l=="number"&&typeof f=="number"&&f<l)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}i.validateSettings=d;function c(h){var l=(0,e.assign)({},i.DEFAULT_SETTINGS,h);return l.nodeProgramClasses=(0,e.assign)({},i.DEFAULT_NODE_PROGRAM_CLASSES,l.nodeProgramClasses),l.edgeProgramClasses=(0,e.assign)({},i.DEFAULT_EDGE_PROGRAM_CLASSES,l.edgeProgramClasses),l}i.resolveSettings=c})(Qr);var Ct={},as=b&&b.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ss=b&&b.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e);var n=Object.getOwnPropertyDescriptor(t,e);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,n)}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),us=b&&b.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),ds=b&&b.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&ss(t,i,e);return us(t,i),t},sr=b&&b.__read||function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o};Object.defineProperty(Ct,"__esModule",{value:!0});var J=ds(O),hs=200,ur=3,cs=200,ls=function(i){as(t,i);function t(e,r){var n=i.call(this,e,r)||this;return n.enabled=!0,n.isMoving=!1,n.hasMoved=!1,n.touchMode=0,n.startTouchesPositions=[],n.handleStart=n.handleStart.bind(n),n.handleLeave=n.handleLeave.bind(n),n.handleMove=n.handleMove.bind(n),e.addEventListener("touchstart",n.handleStart,!1),e.addEventListener("touchend",n.handleLeave,!1),e.addEventListener("touchcancel",n.handleLeave,!1),e.addEventListener("touchmove",n.handleMove,!1),n}return t.prototype.kill=function(){var e=this.container;e.removeEventListener("touchstart",this.handleStart),e.removeEventListener("touchend",this.handleLeave),e.removeEventListener("touchcancel",this.handleLeave),e.removeEventListener("touchmove",this.handleMove)},t.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},t.prototype.dispatchRelatedMouseEvent=function(e,r,n,o){var a=n||r.touches[0],s=new MouseEvent(e,{clientX:a.clientX,clientY:a.clientY,altKey:r.altKey,ctrlKey:r.ctrlKey});s.isFakeSigmaMouseEvent=!0,(o||this.container).dispatchEvent(s)},t.prototype.handleStart=function(e){var r=this;if(this.enabled){e.preventDefault(),e.touches.length===1&&this.dispatchRelatedMouseEvent("mousedown",e);var n=(0,J.getTouchesArray)(e.touches);if(this.touchMode=n.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=n.map(function(l){return(0,J.getPosition)(l,r.container)}),this.lastTouches=n,this.lastTouchesPositions=this.startTouchesPositions,this.touchMode===2){var o=sr(this.startTouchesPositions,2),a=o[0],s=a.x,u=a.y,d=o[1],c=d.x,h=d.y;this.startTouchesAngle=Math.atan2(h-u,c-s),this.startTouchesDistance=Math.sqrt(Math.pow(c-s,2)+Math.pow(h-u,2))}this.emit("touchdown",(0,J.getTouchCoords)(e,this.container))}},t.prototype.handleLeave=function(e){if(this.enabled){switch(e.preventDefault(),e.touches.length===0&&this.lastTouches&&this.lastTouches.length&&(this.dispatchRelatedMouseEvent("mouseup",e,this.lastTouches[0],document),this.hasMoved||this.dispatchRelatedMouseEvent("click",e,this.lastTouches[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(e.touches.length===1){this.handleStart(e),e.preventDefault();break}case 1:if(this.isMoving){var r=this.renderer.getCamera(),n=r.getState(),o=r.getPreviousState()||{x:0,y:0};r.animate({x:n.x+ur*(n.x-o.x),y:n.y+ur*(n.y-o.y)},{duration:cs,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}this.emit("touchup",(0,J.getTouchCoords)(e,this.container))}},t.prototype.handleMove=function(e){var r,n=this;if(this.enabled){e.preventDefault(),e.touches.length===1&&this.dispatchRelatedMouseEvent("mousemove",e);var o=(0,J.getTouchesArray)(e.touches),a=o.map(function(Te){return(0,J.getPosition)(Te,n.container)});if(this.lastTouches=o,this.lastTouchesPositions=a,this.hasMoved||(this.hasMoved=a.some(function(Te,Ri){var Ut=n.startTouchesPositions[Ri];return Te.x!==Ut.x||Te.y!==Ut.y})),!!this.hasMoved){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){n.isMoving=!1},hs);var s=this.renderer.getCamera(),u=this.startCameraState;switch(this.touchMode){case 1:{var d=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),c=d.x,h=d.y,l=this.renderer.viewportToFramedGraph(a[0]),f=l.x,p=l.y;s.setState({x:u.x+c-f,y:u.y+h-p});break}case 2:{var g={},y=a[0],v=y.x,w=y.y,_=a[1],x=_.x,N=_.y,M=Math.atan2(N-w,x-v)-this.startTouchesAngle,j=Math.hypot(N-w,x-v)/this.startTouchesDistance,It=s.getBoundedRatio(u.ratio/j);g.ratio=It,g.angle=u.angle+M;var Ae=this.getDimensions(),kt=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:u}),ye=Math.min(Ae.width,Ae.height),Li=ye/Ae.width,Di=ye/Ae.height,$t=It/ye,f=v-ye/2/Li,p=w-ye/2/Di;r=sr([f*Math.cos(-g.angle)-p*Math.sin(-g.angle),p*Math.cos(-g.angle)+f*Math.sin(-g.angle)],2),f=r[0],p=r[1],g.x=kt.x-f*$t,g.y=kt.y+p*$t,s.setState(g);break}}this.emit("touchmove",(0,J.getTouchCoords)(e,this.container))}}},t}(J.default);Ct.default=ls;var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.extend=void 0;function fs(i,t){var e=t.size;if(e!==0){var r=i.length;i.length+=e;var n=0;t.forEach(function(o){i[r+n]=o,n++})}}Ke.extend=fs;var qe={},ps=b&&b.__read||function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o};Object.defineProperty(qe,"__esModule",{value:!0});qe.getPixelColor=void 0;function gs(i,t,e,r,n,o){var a=Math.floor(e/o*n),s=Math.floor(i.drawingBufferHeight/o-r/o*n),u=new Uint8Array(4);i.bindFramebuffer(i.FRAMEBUFFER,t),i.readPixels(a,s,1,1,i.RGBA,i.UNSIGNED_BYTE,u);var d=ps(u,4),c=d[0],h=d[1],l=d[2],f=d[3];return[c,h,l,f]}qe.getPixelColor=gs;var ys=b&&b.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),S=b&&b.__assign||function(){return S=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},S.apply(this,arguments)},dr=b&&b.__read||function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},hr=b&&b.__spreadArray||function(i,t,e){if(e||arguments.length===2)for(var r=0,n=t.length,o;r<n;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return i.concat(o||Array.prototype.slice.call(t))},Lt=b&&b.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(wt,"__esModule",{value:!0});var cr=Lt(Be),vs=Lt(He),ms=ge,G=A,ht=ce,Ne=Qr,ws=Lt(Ct),Ge=I,lr=Ke,fr=qe,pr=150,gr=50;function _s(i,t,e){if(!e.hasOwnProperty("x")||!e.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(t,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return e.color||(e.color=i.defaultNodeColor),!e.label&&e.label!==""&&(e.label=null),e.label!==void 0&&e.label!==null?e.label=""+e.label:e.label=null,e.size||(e.size=2),e.hasOwnProperty("hidden")||(e.hidden=!1),e.hasOwnProperty("highlighted")||(e.highlighted=!1),e.hasOwnProperty("forceLabel")||(e.forceLabel=!1),(!e.type||e.type==="")&&(e.type=i.defaultNodeType),e.zIndex||(e.zIndex=0),e}function bs(i,t,e){return e.color||(e.color=i.defaultEdgeColor),e.label||(e.label=""),e.size||(e.size=.5),e.hasOwnProperty("hidden")||(e.hidden=!1),e.hasOwnProperty("forceLabel")||(e.forceLabel=!1),(!e.type||e.type==="")&&(e.type=i.defaultEdgeType),e.zIndex||(e.zIndex=0),e}var Es=function(i){ys(t,i);function t(e,r,n){n===void 0&&(n={});var o=i.call(this)||this;if(o.elements={},o.canvasContexts={},o.webGLContexts={},o.pickingLayers=new Set,o.textures={},o.frameBuffers={},o.activeListeners={},o.labelGrid=new ht.LabelGrid,o.nodeDataCache={},o.edgeDataCache={},o.nodeProgramIndex={},o.edgeProgramIndex={},o.nodesWithForcedLabels=new Set,o.edgesWithForcedLabels=new Set,o.nodeExtent={x:[0,1],y:[0,1]},o.nodeZExtent=[1/0,-1/0],o.edgeZExtent=[1/0,-1/0],o.matrix=(0,Ge.identity)(),o.invMatrix=(0,Ge.identity)(),o.correctionRatio=1,o.customBBox=null,o.normalizationFunction=(0,G.createNormalizationFunction)({x:[0,1],y:[0,1]}),o.graphToViewportRatio=1,o.itemIDsIndex={},o.nodeIndices={},o.edgeIndices={},o.width=0,o.height=0,o.pixelRatio=(0,G.getPixelRatio)(),o.pickingDownSizingRatio=2*o.pixelRatio,o.displayedNodeLabels=new Set,o.displayedEdgeLabels=new Set,o.highlightedNodes=new Set,o.hoveredNode=null,o.hoveredEdge=null,o.renderFrame=null,o.renderHighlightedNodesFrame=null,o.needToProcess=!1,o.checkEdgesEventsFrame=null,o.nodePrograms={},o.nodeHoverPrograms={},o.edgePrograms={},o.settings=(0,Ne.resolveSettings)(n),(0,Ne.validateSettings)(o.settings),(0,G.validateGraph)(e),!(r instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");o.graph=e,o.container=r,o.createWebGLContext("edges",{picking:n.enableEdgeEvents}),o.createCanvasContext("edgeLabels"),o.createWebGLContext("nodes",{picking:!0}),o.createCanvasContext("labels"),o.createCanvasContext("hovers"),o.createWebGLContext("hoverNodes"),o.createCanvasContext("mouse"),o.resize();for(var a in o.settings.nodeProgramClasses){var s=o.settings.nodeProgramClasses[a];o.nodePrograms[a]=new s(o.webGLContexts.nodes,o.frameBuffers.nodes,o);var u=s;a in o.settings.nodeHoverProgramClasses&&(u=o.settings.nodeHoverProgramClasses[a]),o.nodeHoverPrograms[a]=new u(o.webGLContexts.hoverNodes,null,o)}for(var a in o.settings.edgeProgramClasses){var d=o.settings.edgeProgramClasses[a];o.edgePrograms[a]=new d(o.webGLContexts.edges,o.frameBuffers.edges,o)}return o.camera=new cr.default,o.bindCameraHandlers(),o.mouseCaptor=new vs.default(o.elements.mouse,o),o.touchCaptor=new ws.default(o.elements.mouse,o),o.bindEventHandlers(),o.bindGraphHandlers(),o.handleSettingsUpdate(),o.refresh(),o}return t.prototype.createCanvas=function(e){var r=(0,G.createElement)("canvas",{position:"absolute"},{class:"sigma-".concat(e)});return this.elements[e]=r,this.container.appendChild(r),r},t.prototype.createCanvasContext=function(e){var r=this.createCanvas(e),n={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[e]=r.getContext("2d",n),this},t.prototype.createWebGLContext=function(e,r){var n=this.createCanvas(e);r!=null&&r.hidden&&n.remove();var o=S({preserveDrawingBuffer:!1,antialias:!1},r||{}),a;a=n.getContext("webgl2",o),a||(a=n.getContext("webgl",o)),a||(a=n.getContext("experimental-webgl",o));var s=a;if(this.webGLContexts[e]=s,s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),r!=null&&r.picking){this.pickingLayers.add(e);var u=s.createFramebuffer();if(!u)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(e));this.frameBuffers[e]=u}return this},t.prototype.resetWebGLTexture=function(e){var r=this.webGLContexts[e],n=this.frameBuffers[e],o=this.textures[e];o&&r.deleteTexture(o);var a=r.createTexture();return r.bindFramebuffer(r.FRAMEBUFFER,n),r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0),this.textures[e]=a,this},t.prototype.bindCameraHandlers=function(){var e=this;return this.activeListeners.camera=function(){e.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this},t.prototype.unbindCameraHandlers=function(){return this.camera.removeListener("updated",this.activeListeners.camera),this},t.prototype.getNodeAtPosition=function(e){var r=e.x,n=e.y,o=(0,fr.getPixelColor)(this.webGLContexts.nodes,this.frameBuffers.nodes,r,n,this.pixelRatio,this.pickingDownSizingRatio),a=G.colorToIndex.apply(void 0,hr([],dr(o),!1)),s=this.itemIDsIndex[a];return s&&s.type==="node"?s.id:null},t.prototype.bindEventHandlers=function(){var e=this;this.activeListeners.handleResize=function(){e.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(n){var o={event:n,preventSigmaDefault:function(){n.preventSigmaDefault()}},a=e.getNodeAtPosition(n);if(a&&e.hoveredNode!==a&&!e.nodeDataCache[a].hidden){e.hoveredNode&&e.emit("leaveNode",S(S({},o),{node:e.hoveredNode})),e.hoveredNode=a,e.emit("enterNode",S(S({},o),{node:a})),e.scheduleHighlightedNodesRender();return}if(e.hoveredNode&&e.getNodeAtPosition(n)!==e.hoveredNode){var s=e.hoveredNode;e.hoveredNode=null,e.emit("leaveNode",S(S({},o),{node:s})),e.scheduleHighlightedNodesRender();return}e.settings.enableEdgeEvents&&e.checkEdgeHoverEvents(o)};var r=function(n){return function(o){var a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}},s=o.original.isFakeSigmaMouseEvent,u=s?e.getNodeAtPosition(o):e.hoveredNode;if(u)return e.emit("".concat(n,"Node"),S(S({},a),{node:u}));if(e.settings.enableEdgeEvents){var d=e.getEdgeAtPoint(o.x,o.y);if(d)return e.emit("".concat(n,"Edge"),S(S({},a),{edge:d}))}return e.emit("".concat(n,"Stage"),a)}};return this.activeListeners.handleClick=r("click"),this.activeListeners.handleRightClick=r("rightClick"),this.activeListeners.handleDoubleClick=r("doubleClick"),this.activeListeners.handleWheel=r("wheel"),this.activeListeners.handleDown=r("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},t.prototype.bindGraphHandlers=function(){var e=this,r=this.graph,n=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(o){var a,s=(a=o.hints)===null||a===void 0?void 0:a.attributes;e.graph.forEachNode(function(d){return e.updateNode(d)});var u=!s||s.some(function(d){return n.has(d)});e.refresh({partialGraph:{nodes:r.nodes()},skipIndexation:!u,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(o){var a,s=(a=o.hints)===null||a===void 0?void 0:a.attributes;e.graph.forEachEdge(function(d){return e.updateEdge(d)});var u=s&&["zIndex","type"].some(function(d){return s==null?void 0:s.includes(d)});e.refresh({partialGraph:{edges:r.edges()},skipIndexation:!u,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(o){var a=o.key;e.addNode(a),e.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(o){var a=o.key;e.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(o){var a=o.key;e.removeNode(a),e.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(o){var a=o.key;e.addEdge(a),e.refresh({partialGraph:{edges:[a]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(o){var a=o.key;e.refresh({partialGraph:{edges:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(o){var a=o.key;e.removeEdge(a),e.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){e.clearEdgeState(),e.clearEdgeIndices(),e.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){e.clearEdgeState(),e.clearNodeState(),e.clearEdgeIndices(),e.clearNodeIndices(),e.refresh({schedule:!0})},r.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),r.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),r.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),r.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),r.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),r.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),r.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),r.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),r.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),r.on("cleared",this.activeListeners.clearGraphUpdate),this},t.prototype.unbindGraphHandlers=function(){var e=this.graph;e.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),e.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),e.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),e.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),e.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),e.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),e.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),e.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),e.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),e.removeListener("cleared",this.activeListeners.clearGraphUpdate)},t.prototype.checkEdgeHoverEvents=function(e){var r=this.hoveredNode?null:this.getEdgeAtPoint(e.event.x,e.event.y);return r!==this.hoveredEdge&&(this.hoveredEdge&&this.emit("leaveEdge",S(S({},e),{edge:this.hoveredEdge})),r&&this.emit("enterEdge",S(S({},e),{edge:r})),this.hoveredEdge=r),this},t.prototype.getEdgeAtPoint=function(e,r){var n=(0,fr.getPixelColor)(this.webGLContexts.edges,this.frameBuffers.edges,e,r,this.pixelRatio,this.pickingDownSizingRatio),o=G.colorToIndex.apply(void 0,hr([],dr(n),!1)),a=this.itemIDsIndex[o];return a&&a.type==="edge"?a.id:null},t.prototype.process=function(){var e=this,r=this.graph,n=this.settings,o=this.getDimensions();this.nodeExtent=(0,G.graphExtent)(this.graph),this.normalizationFunction=(0,G.createNormalizationFunction)(this.customBBox||this.nodeExtent);var a=new cr.default,s=(0,G.matrixFromCamera)(a.getState(),o,this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.labelGrid.resizeAndClear(o,n.labelGridCellSize);for(var u={},d={},c={},h={},l=1,f=r.nodes(),p=0,g=f.length;p<g;p++){var y=f[p],v=this.nodeDataCache[y],w=r.getNodeAttributes(y);v.x=w.x,v.y=w.y,this.normalizationFunction.applyTo(v),typeof v.label=="string"&&!v.hidden&&this.labelGrid.add(y,v.size,this.framedGraphToViewport(v,{matrix:s})),u[v.type]=(u[v.type]||0)+1}this.labelGrid.organize();for(var _ in this.nodePrograms){if(!this.nodePrograms.hasOwnProperty(_))throw new Error('Sigma: could not find a suitable program for node type "'.concat(_,'"!'));this.nodePrograms[_].reallocate(u[_]||0),u[_]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(f=(0,G.zIndexOrdering)(this.nodeZExtent,function(j){return e.nodeDataCache[j].zIndex},f));for(var p=0,g=f.length;p<g;p++){var y=f[p];d[y]=l,h[d[y]]={type:"node",id:y},l++;var v=this.nodeDataCache[y];this.addNodeToProgram(y,d[y],u[v.type]++)}for(var x={},N=r.edges(),p=0,g=N.length;p<g;p++){var M=N[p],v=this.edgeDataCache[M];x[v.type]=(x[v.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(N=(0,G.zIndexOrdering)(this.edgeZExtent,function(j){return e.edgeDataCache[j].zIndex},N));for(var _ in this.edgePrograms){if(!this.edgePrograms.hasOwnProperty(_))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(_,'"!'));this.edgePrograms[_].reallocate(x[_]||0),x[_]=0}for(var p=0,g=N.length;p<g;p++){var M=N[p];c[M]=l,h[c[M]]={type:"edge",id:M},l++;var v=this.edgeDataCache[M];this.addEdgeToProgram(M,c[M],x[v.type]++)}return this.itemIDsIndex=h,this.nodeIndices=d,this.edgeIndices=c,this},t.prototype.handleSettingsUpdate=function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this},t.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var e=this.camera.getState(),r=this.labelGrid.getLabelsToDisplay(e.ratio,this.settings.labelDensity);(0,lr.extend)(r,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var n=this.canvasContexts.labels,o=0,a=r.length;o<a;o++){var s=r[o],u=this.nodeDataCache[s];if(!this.displayedNodeLabels.has(s)&&!u.hidden){var d=this.framedGraphToViewport(u),c=d.x,h=d.y,l=this.scaleSize(u.size);if(!(!u.forceLabel&&l<this.settings.labelRenderedSizeThreshold)&&!(c<-pr||c>this.width+pr||h<-gr||h>this.height+gr)){this.displayedNodeLabels.add(s);var f=this.settings,p=f.nodeProgramClasses,g=f.defaultDrawNodeLabel,y=p[u.type].drawLabel||g;y(n,S(S({key:s},u),{size:l,x:c,y:h}),this.settings)}}}return this},t.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var e=this.canvasContexts.edgeLabels;e.clearRect(0,0,this.width,this.height);var r=(0,ht.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});(0,lr.extend)(r,this.edgesWithForcedLabels);for(var n=new Set,o=0,a=r.length;o<a;o++){var s=r[o],u=this.graph.extremities(s),d=this.nodeDataCache[u[0]],c=this.nodeDataCache[u[1]],h=this.edgeDataCache[s];if(!n.has(s)&&!(h.hidden||d.hidden||c.hidden)){var l=this.settings,f=l.edgeProgramClasses,p=l.defaultDrawEdgeLabel,g=f[h.type].drawLabel||p;g(e,S(S({key:s},h),{size:this.scaleSize(h.size)}),S(S(S({key:u[0]},d),this.framedGraphToViewport(d)),{size:this.scaleSize(d.size)}),S(S(S({key:u[1]},c),this.framedGraphToViewport(c)),{size:this.scaleSize(c.size)}),this.settings),n.add(s)}}return this.displayedEdgeLabels=n,this},t.prototype.renderHighlightedNodes=function(){var e=this,r=this.canvasContexts.hovers;r.clearRect(0,0,this.width,this.height);var n=function(d){var c=e.nodeDataCache[d],h=e.framedGraphToViewport(c),l=h.x,f=h.y,p=e.scaleSize(c.size),g=e.settings,y=g.nodeProgramClasses,v=g.defaultDrawNodeHover,w=y[c.type].drawHover||v;w(r,S(S({key:d},c),{size:p,x:l,y:f}),e.settings)},o=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&o.push(this.hoveredNode),this.highlightedNodes.forEach(function(d){d!==e.hoveredNode&&o.push(d)}),o.forEach(function(d){return n(d)});var a={};o.forEach(function(d){var c=e.nodeDataCache[d].type;a[c]=(a[c]||0)+1});for(var s in this.nodeHoverPrograms)this.nodeHoverPrograms[s].reallocate(a[s]||0),a[s]=0;o.forEach(function(d){var c=e.nodeDataCache[d];e.nodeHoverPrograms[c.type].process(0,a[c.type]++,c)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);for(var s in this.nodeHoverPrograms){var u=this.nodeHoverPrograms[s];u.render({matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,cameraAngle:this.camera.angle,zoomRatio:this.camera.ratio,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio})}},t.prototype.scheduleHighlightedNodesRender=function(){var e=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,G.requestFrame)(function(){e.renderHighlightedNodesFrame=null,e.renderHighlightedNodes(),e.renderEdgeLabels()}))},t.prototype.render=function(){var e=this;this.emit("beforeRender");var r=function(){return e.emit("afterRender"),e};if(this.renderFrame&&((0,G.cancelFrame)(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(f){return e.resetWebGLTexture(f)}),!this.graph.order)return r();var n=this.mouseCaptor,o=this.camera.isAnimated()||n.isMoving||n.draggedEvents||n.currentWheelDirection,a=this.camera.getState(),s=this.getDimensions(),u=this.getGraphDimensions(),d=this.getSetting("stagePadding")||0;this.matrix=(0,G.matrixFromCamera)(a,s,u,d),this.invMatrix=(0,G.matrixFromCamera)(a,s,u,d,!0),this.correctionRatio=(0,G.getMatrixImpact)(this.matrix,a,s),this.graphToViewportRatio=this.getGraphToViewportRatio();var c={matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio};for(var h in this.nodePrograms){var l=this.nodePrograms[h];l.render(c)}if(!this.settings.hideEdgesOnMove||!o)for(var h in this.edgePrograms){var l=this.edgePrograms[h];l.render(c)}return this.settings.hideLabelsOnMove&&o||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),r()},t.prototype.addNode=function(e){var r=Object.assign({},this.graph.getNodeAttributes(e));this.settings.nodeReducer&&(r=this.settings.nodeReducer(e,r));var n=_s(this.settings,e,r);this.nodeDataCache[e]=n,this.nodesWithForcedLabels.delete(e),n.forceLabel&&!n.hidden&&this.nodesWithForcedLabels.add(e),this.highlightedNodes.delete(e),n.highlighted&&!n.hidden&&this.highlightedNodes.add(e),this.settings.zIndex&&(n.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=n.zIndex),n.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=n.zIndex))},t.prototype.updateNode=function(e){this.addNode(e);var r=this.nodeDataCache[e];this.normalizationFunction.applyTo(r)},t.prototype.removeNode=function(e){delete this.nodeDataCache[e],delete this.nodeProgramIndex[e],this.highlightedNodes.delete(e),this.hoveredNode===e&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(e)},t.prototype.addEdge=function(e){var r=Object.assign({},this.graph.getEdgeAttributes(e));this.settings.edgeReducer&&(r=this.settings.edgeReducer(e,r));var n=bs(this.settings,e,r);this.edgeDataCache[e]=n,this.edgesWithForcedLabels.delete(e),n.forceLabel&&!n.hidden&&this.edgesWithForcedLabels.add(e),this.settings.zIndex&&(n.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=n.zIndex),n.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=n.zIndex))},t.prototype.updateEdge=function(e){this.addEdge(e)},t.prototype.removeEdge=function(e){delete this.edgeDataCache[e],delete this.edgeProgramIndex[e],this.hoveredEdge===e&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(e)},t.prototype.clearNodeIndices=function(){this.labelGrid=new ht.LabelGrid,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0]},t.prototype.clearEdgeIndices=function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]},t.prototype.clearIndices=function(){this.clearEdgeIndices(),this.clearNodeIndices()},t.prototype.clearNodeState=function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null},t.prototype.clearEdgeState=function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null},t.prototype.clearState=function(){this.clearEdgeState(),this.clearNodeState()},t.prototype.addNodeToProgram=function(e,r,n){var o=this.nodeDataCache[e],a=this.nodePrograms[o.type];if(!a)throw new Error('Sigma: could not find a suitable program for node type "'.concat(o.type,'"!'));a.process(r,n,o),this.nodeProgramIndex[e]=n},t.prototype.addEdgeToProgram=function(e,r,n){var o=this.edgeDataCache[e],a=this.edgePrograms[o.type];if(!a)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(o.type,'"!'));var s=this.graph.extremities(e),u=this.nodeDataCache[s[0]],d=this.nodeDataCache[s[1]];a.process(r,n,u,d,o),this.edgeProgramIndex[e]=n},t.prototype.getCamera=function(){return this.camera},t.prototype.setCamera=function(e){this.unbindCameraHandlers(),this.camera=e,this.bindCameraHandlers()},t.prototype.getContainer=function(){return this.container},t.prototype.getGraph=function(){return this.graph},t.prototype.setGraph=function(e){e!==this.graph&&(this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&((0,G.cancelFrame)(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=e,this.bindGraphHandlers(),this.refresh())},t.prototype.getMouseCaptor=function(){return this.mouseCaptor},t.prototype.getTouchCaptor=function(){return this.touchCaptor},t.prototype.getDimensions=function(){return{width:this.width,height:this.height}},t.prototype.getGraphDimensions=function(){var e=this.customBBox||this.nodeExtent;return{width:e.x[1]-e.x[0]||1,height:e.y[1]-e.y[0]||1}},t.prototype.getNodeDisplayData=function(e){var r=this.nodeDataCache[e];return r?Object.assign({},r):void 0},t.prototype.getEdgeDisplayData=function(e){var r=this.edgeDataCache[e];return r?Object.assign({},r):void 0},t.prototype.getNodeDisplayedLabels=function(){return new Set(this.displayedNodeLabels)},t.prototype.getEdgeDisplayedLabels=function(){return new Set(this.displayedEdgeLabels)},t.prototype.getSettings=function(){return S({},this.settings)},t.prototype.getSetting=function(e){return this.settings[e]},t.prototype.setSetting=function(e,r){return this.settings[e]=r,(0,Ne.validateSettings)(this.settings),this.handleSettingsUpdate(),this.refresh(),this},t.prototype.updateSetting=function(e,r){return this.settings[e]=r(this.settings[e]),(0,Ne.validateSettings)(this.settings),this.handleSettingsUpdate(),this.scheduleRefresh(),this},t.prototype.resize=function(){var e=this.width,r=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=(0,G.getPixelRatio)(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(e===this.width&&r===this.height)return this;this.emit("resize");for(var n in this.elements){var o=this.elements[n];o.style.width=this.width+"px",o.style.height=this.height+"px"}for(var n in this.canvasContexts)this.elements[n].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[n].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[n].scale(this.pixelRatio,this.pixelRatio);for(var n in this.webGLContexts){this.elements[n].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[n].setAttribute("height",this.height*this.pixelRatio+"px");var a=this.webGLContexts[n];if(a.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(n)){var s=this.textures[n];s&&a.deleteTexture(s)}}return this},t.prototype.clear=function(){return this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},t.prototype.refresh=function(e){var r=this,n,o,a=(e==null?void 0:e.skipIndexation)!==void 0?e==null?void 0:e.skipIndexation:!1,s=(e==null?void 0:e.schedule)!==void 0?e.schedule:!1,u=!e||!e.partialGraph;if(u)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(y){return r.addNode(y)}),this.graph.forEachEdge(function(y){return r.addEdge(y)});else{for(var d=((n=e.partialGraph)===null||n===void 0?void 0:n.nodes)||[],c=0,h=(d==null?void 0:d.length)||0;c<h;c++){var l=d[c];if(this.updateNode(l),a){var f=this.nodeProgramIndex[l];if(f===void 0)throw new Error('Sigma: node "'.concat(l,`" can't be repaint`));this.addNodeToProgram(l,this.nodeIndices[l],f)}}for(var p=((o=e==null?void 0:e.partialGraph)===null||o===void 0?void 0:o.edges)||[],c=0,h=p.length;c<h;c++){var g=p[c];if(this.updateEdge(g),a){var f=this.edgeProgramIndex[g];if(f===void 0)throw new Error('Sigma: edge "'.concat(g,`" can't be repaint`));this.addEdgeToProgram(g,this.edgeIndices[g],f)}}}return(u||!a)&&(this.needToProcess=!0),s?this.scheduleRender():this.render(),this},t.prototype.scheduleRender=function(){var e=this;return this.renderFrame||(this.renderFrame=(0,G.requestFrame)(function(){e.render()})),this},t.prototype.scheduleRefresh=function(e){return this.refresh(S(S({},e),{schedule:!0}))},t.prototype.getViewportZoomedState=function(e,r){var n=this.camera.getState(),o=n.ratio,a=n.angle,s=n.x,u=n.y,d=r/o,c={x:this.width/2,y:this.height/2},h=this.viewportToFramedGraph(e),l=this.viewportToFramedGraph(c);return{angle:a,x:(h.x-l.x)*(1-d)+s,y:(h.y-l.y)*(1-d)+u,ratio:r}},t.prototype.viewRectangle=function(){var e=0*this.width/8,r=0*this.height/8,n=this.viewportToFramedGraph({x:0-e,y:0-r}),o=this.viewportToFramedGraph({x:this.width+e,y:0-r}),a=this.viewportToFramedGraph({x:0,y:this.height+r});return{x1:n.x,y1:n.y,x2:o.x,y2:o.y,height:o.y-a.y}},t.prototype.framedGraphToViewport=function(e,r){r===void 0&&(r={});var n=!!r.cameraState||!!r.viewportDimensions||!!r.graphDimensions,o=r.matrix?r.matrix:n?(0,G.matrixFromCamera)(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getSetting("stagePadding")||0):this.matrix,a=(0,Ge.multiplyVec2)(o,e);return{x:(1+a.x)*this.width/2,y:(1-a.y)*this.height/2}},t.prototype.viewportToFramedGraph=function(e,r){r===void 0&&(r={});var n=!!r.cameraState||!!r.viewportDimensions||!r.graphDimensions,o=r.matrix?r.matrix:n?(0,G.matrixFromCamera)(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,a=(0,Ge.multiplyVec2)(o,{x:e.x/this.width*2-1,y:1-e.y/this.height*2});return isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),a},t.prototype.viewportToGraph=function(e,r){return r===void 0&&(r={}),this.normalizationFunction.inverse(this.viewportToFramedGraph(e,r))},t.prototype.graphToViewport=function(e,r){return r===void 0&&(r={}),this.framedGraphToViewport(this.normalizationFunction(e),r)},t.prototype.getGraphToViewportRatio=function(){var e={x:0,y:0},r={x:1,y:1},n=Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2)),o=this.graphToViewport(e),a=this.graphToViewport(r),s=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2));return s/n},t.prototype.getBBox=function(){return this.nodeExtent},t.prototype.getCustomBBox=function(){return this.customBBox},t.prototype.setCustomBBox=function(e){return this.customBBox=e,this.scheduleRender(),this},t.prototype.kill=function(){var e;this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&((0,G.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,G.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var r in this.webGLContexts){var n=this.webGLContexts[r];(e=n.getExtension("WEBGL_lose_context"))===null||e===void 0||e.loseContext()}for(var o=this.container;o.firstChild;)o.removeChild(o.firstChild);this.canvasContexts={},this.webGLContexts={},this.elements={};for(var a in this.nodePrograms)this.nodePrograms[a].kill();for(var a in this.nodeHoverPrograms)this.nodeHoverPrograms[a].kill();for(var a in this.edgePrograms)this.edgePrograms[a].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={}},t.prototype.scaleSize=function(e,r){return e===void 0&&(e=1),r===void 0&&(r=this.camera.ratio),e/this.settings.zoomToSizeRatioFunction(r)*(this.getSetting("itemSizesReference")==="positions"?r*this.graphToViewportRatio:1)},t.prototype.getCanvases=function(){return S({},this.elements)},t}(ms.TypedEventEmitter);wt.default=Es;var Dt=b&&b.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Q,"__esModule",{value:!0});Q.Sigma=Q.MouseCaptor=Q.Camera=void 0;var vi=Dt(wt);Q.Sigma=vi.default;var xs=Dt(Be);Q.Camera=xs.default;var As=Dt(He);Q.MouseCaptor=As.default;var Ts=Q.default=vi.default,Xe={},Ze={};function Ss(i){return typeof i!="number"||isNaN(i)?1:i}function Cs(i,t){var e={},r=function(a){return typeof a>"u"?t:a};typeof t=="function"&&(r=t);var n=function(a){return r(a[i])},o=function(){return r(void 0)};return typeof i=="string"?(e.fromAttributes=n,e.fromGraph=function(a,s){return n(a.getNodeAttributes(s))},e.fromEntry=function(a,s){return n(s)}):typeof i=="function"?(e.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},e.fromGraph=function(a,s){return r(i(s,a.getNodeAttributes(s)))},e.fromEntry=function(a,s){return r(i(a,s))}):(e.fromAttributes=o,e.fromGraph=o,e.fromEntry=o),e}function mi(i,t){var e={},r=function(a){return typeof a>"u"?t:a};typeof t=="function"&&(r=t);var n=function(a){return r(a[i])},o=function(){return r(void 0)};return typeof i=="string"?(e.fromAttributes=n,e.fromGraph=function(a,s){return n(a.getEdgeAttributes(s))},e.fromEntry=function(a,s){return n(s)},e.fromPartialEntry=e.fromEntry,e.fromMinimalEntry=e.fromEntry):typeof i=="function"?(e.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},e.fromGraph=function(a,s){var u=a.extremities(s);return r(i(s,a.getEdgeAttributes(s),u[0],u[1],a.getNodeAttributes(u[0]),a.getNodeAttributes(u[1]),a.isUndirected(s)))},e.fromEntry=function(a,s,u,d,c,h,l){return r(i(a,s,u,d,c,h,l))},e.fromPartialEntry=function(a,s,u,d){return r(i(a,s,u,d))},e.fromMinimalEntry=function(a,s){return r(i(a,s))}):(e.fromAttributes=o,e.fromGraph=o,e.fromEntry=o,e.fromMinimalEntry=o),e}Ze.createNodeValueGetter=Cs;Ze.createEdgeValueGetter=mi;Ze.createEdgeWeightGetter=function(i){return mi(i,Ss)};var wi=Ue,Ls=wi.ARRAY_BUFFER_SUPPORT,Ds=wi.SYMBOL_SUPPORT,_i=function(t,e){var r,n,o,a,s;if(!t)throw new Error("obliterator/forEach: invalid iterable.");if(typeof e!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(t)||Ls&&ArrayBuffer.isView(t)||typeof t=="string"||t.toString()==="[object Arguments]"){for(o=0,a=t.length;o<a;o++)e(t[o],o);return}if(typeof t.forEach=="function"){t.forEach(e);return}if(Ds&&Symbol.iterator in t&&typeof t.next!="function"&&(t=t[Symbol.iterator]()),typeof t.next=="function"){for(r=t,o=0;s=r.next(),s.done!==!0;)e(s.value,o),o++;return}for(n in t)t.hasOwnProperty(n)&&e(t[n],n)},be={},Rs=function(i,t){return i<t?-1:i>t?1:0},Ns=function(i,t){return i<t?1:i>t?-1:0};function Gs(i){return function(t,e){return i(e,t)}}function Ps(i){return i===2?function(t,e){return t[0]<e[0]?-1:t[0]>e[0]?1:t[1]<e[1]?-1:t[1]>e[1]?1:0}:function(t,e){for(var r=0;r<i;){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1;r++}return 0}}be.DEFAULT_COMPARATOR=Rs;be.DEFAULT_REVERSE_COMPARATOR=Ns;be.reverseComparator=Gs;be.createTupleComparator=Ps;var Ee={},bi={};(function(i){var t=Math.pow(2,8)-1,e=Math.pow(2,16)-1,r=Math.pow(2,32)-1,n=Math.pow(2,7)-1,o=Math.pow(2,15)-1,a=Math.pow(2,31)-1;i.getPointerArray=function(u){var d=u-1;if(d<=t)return Uint8Array;if(d<=e)return Uint16Array;if(d<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},i.getSignedPointerArray=function(u){var d=u-1;return d<=n?Int8Array:d<=o?Int16Array:d<=a?Int32Array:Float64Array},i.getNumberType=function(u){return u===(u|0)?Math.sign(u)===-1?u<=127&&u>=-128?Int8Array:u<=32767&&u>=-32768?Int16Array:Int32Array:u<=255?Uint8Array:u<=65535?Uint16Array:Uint32Array:Float64Array};var s={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};i.getMinimalRepresentation=function(u,d){var c=null,h=0,l,f,p,g,y;for(g=0,y=u.length;g<y;g++)p=d?d(u[g]):u[g],f=i.getNumberType(p),l=s[f.name],l>h&&(h=l,c=f);return c},i.isTypedArray=function(u){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(u)},i.concat=function(){var u=0,d,c,h;for(d=0,h=arguments.length;d<h;d++)u+=arguments[d].length;var l=new arguments[0].constructor(u);for(d=0,c=0;d<h;d++)l.set(arguments[d],c),c+=arguments[d].length;return l},i.indices=function(u){for(var d=i.getPointerArray(u),c=new d(u),h=0;h<u;h++)c[h]=h;return c}})(bi);var Ei=_i,xi=bi;function Fs(i){return Array.isArray(i)||xi.isTypedArray(i)}function Rt(i){if(typeof i.length=="number")return i.length;if(typeof i.size=="number")return i.size}function Os(i){var t=Rt(i),e=typeof t=="number"?new Array(t):[],r=0;return Ei(i,function(n){e[r++]=n}),e}function Ms(i){var t=Rt(i),e=typeof t=="number"?xi.getPointerArray(t):Array,r=typeof t=="number"?new Array(t):[],n=typeof t=="number"?new e(t):[],o=0;return Ei(i,function(a){r[o]=a,n[o]=o++}),[r,n]}Ee.isArrayLike=Fs;Ee.guessLength=Rt;Ee.toArray=Os;Ee.toArrayWithIndices=Ms;var Me=_i,Ai=be,K=Ee,Je=Ai.DEFAULT_COMPARATOR,Nt=Ai.reverseComparator;function Gt(i,t,e,r){for(var n=t[r],o,a;r>e;){if(o=r-1>>1,a=t[o],i(n,a)<0){t[r]=a,r=o;continue}break}t[r]=n}function xe(i,t,e){for(var r=t.length,n=e,o=t[e],a=2*e+1,s;a<r;)s=a+1,s<r&&i(t[a],t[s])>=0&&(a=s),t[e]=t[a],e=a,a=2*e+1;t[e]=o,Gt(i,t,n,e)}function Ti(i,t,e){t.push(e),Gt(i,t,0,t.length-1)}function Pt(i,t){var e=t.pop();if(t.length!==0){var r=t[0];return t[0]=e,xe(i,t,0),r}return e}function le(i,t,e){if(t.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var r=t[0];return t[0]=e,xe(i,t,0),r}function Si(i,t,e){var r;return t.length!==0&&i(t[0],e)<0&&(r=t[0],t[0]=e,e=r,xe(i,t,0)),e}function ne(i,t){for(var e=t.length,r=e>>1,n=r;--n>=0;)xe(i,t,n)}function Ft(i,t){for(var e=t.length,r=0,n=new Array(e);r<e;)n[r++]=Pt(i,t);return n}function Is(i,t,e){arguments.length===2&&(e=t,t=i,i=Je);var r=Nt(i),n,o,a,s=1/0,u;if(t===1){if(K.isArrayLike(e)){for(n=0,o=e.length;n<o;n++)a=e[n],(s===1/0||i(a,s)<0)&&(s=a);return u=new e.constructor(1),u[0]=s,u}return Me(e,function(c){(s===1/0||i(c,s)<0)&&(s=c)}),[s]}if(K.isArrayLike(e)){if(t>=e.length)return e.slice().sort(i);for(u=e.slice(0,t),ne(r,u),n=t,o=e.length;n<o;n++)r(e[n],u[0])>0&&le(r,u,e[n]);return u.sort(i)}var d=K.guessLength(e);return d!==null&&d<t&&(t=d),u=new Array(t),n=0,Me(e,function(c){n<t?u[n]=c:(n===t&&ne(r,u),r(c,u[0])>0&&le(r,u,c)),n++}),u.length>n&&(u.length=n),u.sort(i)}function ks(i,t,e){arguments.length===2&&(e=t,t=i,i=Je);var r=Nt(i),n,o,a,s=-1/0,u;if(t===1){if(K.isArrayLike(e)){for(n=0,o=e.length;n<o;n++)a=e[n],(s===-1/0||i(a,s)>0)&&(s=a);return u=new e.constructor(1),u[0]=s,u}return Me(e,function(c){(s===-1/0||i(c,s)>0)&&(s=c)}),[s]}if(K.isArrayLike(e)){if(t>=e.length)return e.slice().sort(r);for(u=e.slice(0,t),ne(i,u),n=t,o=e.length;n<o;n++)i(e[n],u[0])>0&&le(i,u,e[n]);return u.sort(r)}var d=K.guessLength(e);return d!==null&&d<t&&(t=d),u=new Array(t),n=0,Me(e,function(c){n<t?u[n]=c:(n===t&&ne(i,u),i(c,u[0])>0&&le(i,u,c)),n++}),u.length>n&&(u.length=n),u.sort(r)}function L(i){if(this.clear(),this.comparator=i||Je,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}L.prototype.clear=function(){this.items=[],this.size=0};L.prototype.push=function(i){return Ti(this.comparator,this.items,i),++this.size};L.prototype.peek=function(){return this.items[0]};L.prototype.pop=function(){return this.size!==0&&this.size--,Pt(this.comparator,this.items)};L.prototype.replace=function(i){return le(this.comparator,this.items,i)};L.prototype.pushpop=function(i){return Si(this.comparator,this.items,i)};L.prototype.consume=function(){return this.size=0,Ft(this.comparator,this.items)};L.prototype.toArray=function(){return Ft(this.comparator,this.items.slice())};L.prototype.inspect=function(){var i=this.toArray();return Object.defineProperty(i,"constructor",{value:L,enumerable:!1}),i};typeof Symbol<"u"&&(L.prototype[Symbol.for("nodejs.util.inspect.custom")]=L.prototype.inspect);function Ie(i){if(this.clear(),this.comparator=i||Je,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=Nt(this.comparator)}Ie.prototype=L.prototype;L.from=function(i,t){var e=new L(t),r;return K.isArrayLike(i)?r=i.slice():r=K.toArray(i),ne(e.comparator,r),e.items=r,e.size=r.length,e};Ie.from=function(i,t){var e=new Ie(t),r;return K.isArrayLike(i)?r=i.slice():r=K.toArray(i),ne(e.comparator,r),e.items=r,e.size=r.length,e};L.siftUp=xe;L.siftDown=Gt;L.push=Ti;L.pop=Pt;L.replace=le;L.pushpop=Si;L.heapify=ne;L.consume=Ft;L.nsmallest=Is;L.nlargest=ks;L.MinHeap=L;L.MaxHeap=Ie;var $s=L,Ci=jr,Ot=Ze.createEdgeWeightGetter,ke=$s,Mt="weight";function ct(i,t){return i[0]>t[0]?1:i[0]<t[0]?-1:i[1]>t[1]?1:i[1]<t[1]?-1:i[2]>t[2]?1:i[2]<t[2]?-1:0}function Us(i,t){return i[0]>t[0]?1:i[0]<t[0]?-1:i[1]>t[1]?1:i[1]<t[1]?-1:i[2]>t[2]?1:i[2]<t[2]?-1:i[3]>t[3]?1:i[3]<t[3]?-1:0}function zs(i,t,e,r){if(t=""+t,e=""+e,!Ci(i))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(t&&!i.hasNode(t))throw new Error('graphology-shortest-path/dijkstra: the "'+t+'" source node does not exist in the given graph.');if(e&&!i.hasNode(e))throw new Error('graphology-shortest-path/dijkstra: the "'+e+'" target node does not exist in the given graph.');if(r=Ot(r||Mt).fromMinimalEntry,t===e)return[0,[t]];var n=[{},{}],o=[{},{}],a=[new ke(ct),new ke(ct)],s=[{},{}];o[0][t]=[t],o[1][e]=[e],s[0][t]=0,s[1][e]=0;var u=[],d=1/0,c=0,h=1,l,f,p,g,y,v,w,_,x;for(a[0].push([0,c++,t]),a[1].push([0,c++,e]);a[0].size&&a[1].size;)if(h=1-h,l=a[h].pop(),g=l[0],y=l[2],!(y in n[h])){if(n[h][y]=g,y in n[1-h])return[d,u];for(f=h===1?i.inboundEdges(y):i.outboundEdges(y),_=0,x=f.length;_<x;_++){if(w=f[_],v=i.opposite(y,w),p=n[h][y]+r(w,i.getEdgeAttributes(w)),v in n[h]&&p<n[h][v])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(v in s[h])||p<s[h][v])&&(s[h][v]=p,a[h].push([p,c++,v]),o[h][v]=o[h][y].concat(v),v in s[0]&&v in s[1]&&(g=s[0][v]+s[1][v],(u.length===0||d>g)&&(d=g,u=o[0][v].concat(o[1][v].slice(0,-1).reverse()))))}}return[1/0,null]}function Bs(i,t,e,r,n,o){if(!Ci(i))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(n&&!i.hasNode(n))throw new Error('graphology-shortest-path/dijkstra: the "'+n+'" target node does not exist in the given graph.');e=Ot(e||Mt).fromMinimalEntry;var a={},s={},u=new ke(ct),d=0,c,h,l,f,p,g,y,v,w,_,x;for(v=0,_=t.length;v<_;v++)f=t[v],s[f]=0,u.push([0,d++,f]),o&&(o[f]=[f]);for(;u.size;)if(h=u.pop(),y=h[0],f=h[2],!(f in a)){if(a[f]=y,f===n)break;for(c=i.outboundEdges(f),w=0,x=c.length;w<x;w++)if(g=c[w],p=i.opposite(f,g),l=e(g,i.getEdgeAttributes(g))+a[f],!(r&&l>r)){if(p in a&&l<a[p])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(p in s)||l<s[p])&&(s[p]=l,u.push([l,d++,p]),o&&(o[p]=o[f].concat(p)))}}return a}function js(i,t,e){var r={};return Bs(i,[t],e,0,null,r),r}function Hs(i,t,e,r){return zs(i,t,e,r)[1]}function Ws(i,t,e){t=""+t,e=Ot(e||Mt).fromMinimalEntry;var r=[],n={},o={},a=i.nodes(),s,u,d,c,h,l,f,p,g,y;for(g=0,y=a.length;g<y;g++)l=a[g],n[l]=[],o[l]=0;var v={};o[t]=1;var w={};w[t]=0;var _=0,x=new ke(Us);for(x.push([0,_++,t,t]);x.size;)if(u=x.pop(),c=u[0],d=u[2],l=u[3],!(l in v))for(o[l]+=o[d],r.push(l),v[l]=c,s=i.outboundEdges(l),g=0,y=s.length;g<y;g++)p=s[g],f=i.opposite(l,p),h=c+e(p,i.getEdgeAttributes(p)),!(f in v)&&(!(f in w)||h<w[f])?(w[f]=h,x.push([h,_++,l,f]),o[f]=0,n[f]=[l]):h===w[f]&&(o[f]+=o[l],n[f].push(l));return[r,n,o]}Xe.bidirectional=Hs;Xe.singleSource=js;Xe.brandes=Ws;function Vs(i){let t,e,r,n,o,a,s,u,d,c,h,l='<div id="background" class="svelte-hsahso"></div>',f,p;return{c(){t=oe("div"),e=oe("input"),r=Qe(),n=oe("input"),o=Qe(),a=oe("span"),s=Bt("Sum: "),u=oe("span"),d=Bt(i[0]),c=Qe(),h=oe("div"),h.innerHTML=l,this.h()},l(g){t=ae(g,"DIV",{id:!0,class:!0});var y=et(t);e=ae(y,"INPUT",{type:!0,name:!0,id:!0,accept:!0}),r=tt(y),n=ae(y,"INPUT",{type:!0,name:!0,id:!0,accept:!0}),o=tt(y),a=ae(y,"SPAN",{});var v=et(a);s=jt(v,"Sum: "),u=ae(v,"SPAN",{});var w=et(u);d=jt(w,i[0]),w.forEach(Se),v.forEach(Se),c=tt(y),h=ae(y,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),Mi(h)!=="svelte-1teusq9"&&(h.innerHTML=l),y.forEach(Se),this.h()},h(){$(e,"type","file"),$(e,"name","file"),$(e,"id","file-input"),$(e,"accept",".json"),$(n,"type","file"),$(n,"name","file"),$(n,"id","bgnd-input"),$(n,"accept",".jpeg, .jpg, .png"),$(h,"id","sigma-container"),$(h,"class","svelte-hsahso"),$(t,"id","root"),$(t,"class","svelte-hsahso")},m(g,y){Ii(g,t,y),W(t,e),W(t,r),W(t,n),W(t,o),W(t,a),W(a,s),W(a,u),W(u,d),W(t,c),W(t,h),f||(p=[Ht(e,"change",i[2]),Ht(n,"change",i[3]),Gi(i[1].call(null,h))],f=!0)},p(g,[y]){y&1&&ki(d,g[0])},i:zt,o:zt,d(g){g&&Se(t),f=!1,Pi(p)}}}function Ys(i,t,e){let r=0,n=null,o=null,a=null,s;const u={path:[]};let d=null;function c(p){if(d=document.getElementById("sigma-container"),!d)throw"No container found";console.log(d),s=new C,s.addNode("John",{x:0,y:10,size:5,label:"John",color:"blue"}),s.addNode("Mary",{x:10,y:0,size:3,label:"Mary",color:"red"}),s.addEdge("John","Mary"),n=new Ts(s,d,{maxCameraRatio:4,minCameraRatio:.01,renderEdgeLabels:!0,defaultNodeColor:"#00000022"}),n.on("clickNode",g=>{if(console.log(g),o===null)o=g.node;else if(a===null){a=g.node,console.log(s.nodes());const y=Xe.bidirectional(s,o,a);y===null?alert("No path found"):(console.log(y),u.path=y,e(0,r=0),n==null||n.refresh()),o=a=null}}),n.setSetting("edgeReducer",(g,y)=>{const v={...y};console.log(y,g);const w=s.source(g),_=s.target(g);let x=u.path.indexOf(w);return x!==-1&&(u.path[x+1]&&u.path[x+1]===_||u.path[x-1]&&u.path[x-1]===_)&&(v.size=3,e(0,r+=y.weight)),v})}function h(p){var w;const y=(w=p.target.files)==null?void 0:w[0];if(!y)return;const v=new FileReader;v.onload=_=>{var N;const x=JSON.parse((N=_.target)==null?void 0:N.result);console.log(x),l(x)},v.readAsText(y)}function l(p){s=new C({multi:p.multigraph,type:p.directed?"directed":"undirected"});for(const g of p.nodes)s.addNode(g.id,{x:g.x,y:g.y*-1,label:g.id.toString(),size:5});for(const g of p.links)s.addEdge(g.source,g.target,{weight:g.weight,color:g.color,label:g.weight.toString()});n==null||n.setGraph(s)}function f(p){var w;const y=(w=p.target.files)==null?void 0:w[0];if(!y)return;const v=new FileReader;v.onload=_=>{var x;d&&(d.style.backgroundImage=`url(${(x=_.target)==null?void 0:x.result})`)},v.readAsDataURL(y)}return[r,c,h,f]}class Xs extends Fi{constructor(t){super(),Oi(this,t,Ys,Vs,Ni,{})}}export{Xs as component};
